!function(e){"use strict";function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new _(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return x()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var u=T(o,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,o),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function h(){}function v(){}function d(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=d.prototype=h.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==f(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return v.prototype=d,s(b,"constructor",d),s(d,"constructor",v),v.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new w(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw i}}return a}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function h(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,u)}s((n=n.apply(e,t||[])).next())}))}var v={};var d="object"===("undefined"==typeof globalThis?"undefined":f(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":f(window))?window:"object"===("undefined"==typeof global?"undefined":f(global))?global:"object"===("undefined"==typeof self?"undefined":f(self))?self:v,m=d.console,g=d.document,y=d.navigator,b=d.performance,k=d.addEventListener,w=d.removeEventListener,T=g.addEventListener,E=g.removeEventListener,S=d.XMLHttpRequest,_=function(){return null==y?void 0:y.deviceMemory},A=function(){return null==y?void 0:y.hardwareConcurrency},x=[null,"null",void 0,"undefined",""],I=["localhost","127.0.0.1"],M=["modelo.io","coohom.com"],C="<anonymous>",O="__ktr_block_error__",R="__ktr_wrapped__",P="__ktr_original__",F="KTR_HACK_META",L=["SCRIPT","LINK","IMG"],j="qunhe-monitor-ktracker-index",N="KTR_SAMPLE_SEED",z="KTR_VISIT_SESSION",D=["defaulttag","defualttag"],B="pub-meta",q=["gray"],U=/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/i,H=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,K=/^\.([a-z|A-Z|0-9]+)/,G=3e5,Q=1048576e3,$=/^(192\.168\.|169\.254\.|10\.|127\.|172\.(1[6-9]|2\d|3[01]))/,V=new RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}"),W=["headlesschrome","360spider","baiduspider","googlebot","sogou web spider","sogou inst spider","sogou spider","sogou wap spider","bytespider","bingbot","bingpreview","msnbot","yisouspider"],J=["pybellheadlesschrome"],X=["name","message","stack"],Y=["actionstat.qunhequnhe.com","actionstat.kujiale.com","actionstat.coohom.com","actiontrack.qunhequnhe.com","actiontrack.kujiale.com","actiontrack.coohom.com","mc.qunhequnhe.com","mc.kujiale.com","mc.coohom.com","api.growingio.com","mixpanel.com","qhtbdoss.kujiale.com","qhyxpicoss.kujiale.com","spriteoss.kujiale.com","sse.kujiale.com","qiyukf.com","qiyukf.nosdn.127.net","segment.io","segment.com","51.la","google-analytics.com","googletagmanager.com","googlesyndication.com","baidu.com","ysf.nosdn.127.net","js.hs-analytics.net","facebook.net","twitter.com","bing.com","stats.g.doubleclick.net","scripts.hashemian.com","api.ipify.org","api.ip.sb","ip-api.com"],Z=/\/ktracker.min.js$/,ee=[Z,/\/m.pop$/,/\/kio([\s\S]*)js$/,/gio.js$/,"/api/login/status","/d/api/session","/notify/api/common","/deco/api/subscribe"],te=function(){};function re(e){return Promise.resolve(e)}var ne,ie=["Possible side-effect in debug-evaluate","ResizeObserver loop limit exceeded"],ae={name:"Error",message:"",stack:[],originStack:""},oe="pn",ue="ps",se="pv";!function(e){e.Err="error",e.Beh="behavior",e.Rou="route",e.Biz="business",e.Nav="navigation",e.Res="resource",e.Http="http",e.Mea="measure"}(ne||(ne={}));var ce,le="AJAX_ERROR",fe="JS_ERROR",pe="consoleError",he="runtimeError",ve="unhandledrejection",de="wrap",me="resourceError",ge="fp",ye="fcp",be="lcp",ke="inp",we="fid",Te="cls",Ee="longtask",Se="tbt",_e="element",Ae="userMarker",xe="ready",Ie="hunterid",Me="content-type",Ce="content-length",Oe="date",Re="x-qunhe-bizcode",Pe="x-qunhe-bizmessage",Fe="requestid",Le="c",je="m";!function(e){e.Num="Number",e.Str="String",e.Bool="Boolean",e.Obj="Object",e.Arr="Array",e.InvErr="Script error.",e.FormData="FormData"}(ce||(ce={}));var Ne,ze=100,De=500,Be=1e3,qe="https://mc.kujiale.com:8880",Ue="https://mc.coohom.com";!function(e){e.ExErr="__EXCLUDE_ERROR__",e.ExApi="__EXCLUDE_API__",e.ExApiErr="__EXCLUDE_API_ERROR__",e.AppRoute="__APP_ROUTE__"}(Ne||(Ne={}));var He={visit:"visitSample",longTask:"longTaskSample"},Ke="hackMetric",Ge="element",Qe=Array.isArray,$e="object"==("undefined"==typeof global?"undefined":f(global))&&global&&global.Object===Object&&global,Ve="object"==("undefined"==typeof self?"undefined":f(self))&&self&&self.Object===Object&&self,We=$e||Ve||Function("return this")(),Je=We.Symbol,Xe=Object.prototype,Ye=Xe.hasOwnProperty,Ze=Xe.toString,et=Je?Je.toStringTag:void 0;var tt=Object.prototype.toString;var rt=Je?Je.toStringTag:void 0;function nt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?function(e){var t=Ye.call(e,et),r=e[et];try{e[et]=void 0;var n=!0}catch(e){}var i=Ze.call(e);return n&&(t?e[et]=r:delete e[et]),i}(e):function(e){return tt.call(e)}(e)}function it(e){return"symbol"==f(e)||function(e){return null!=e&&"object"==f(e)}(e)&&"[object Symbol]"==nt(e)}var at=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ot=/^\w*$/;function ut(e){var t=f(e);return null!=e&&("object"==t||"function"==t)}var st,ct=We["__core-js_shared__"],lt=(st=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+st:"";var ft=Function.prototype.toString;var pt=/^\[object .+?Constructor\]$/,ht=Function.prototype,vt=Object.prototype,dt=ht.toString,mt=vt.hasOwnProperty,gt=RegExp("^"+dt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(e){if(!ut(e)||(t=e,lt&&lt in t))return!1;var t,r=function(e){if(!ut(e))return!1;var t=nt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?gt:pt;return r.test(function(e){if(null!=e){try{return ft.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function bt(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return yt(r)?r:void 0}var kt=bt(Object,"create");var wt=Object.prototype.hasOwnProperty;var Tt=Object.prototype.hasOwnProperty;function Et(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function St(e,t){return e===t||e!=e&&t!=t}function _t(e,t){for(var r=e.length;r--;)if(St(e[r][0],t))return r;return-1}Et.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},Et.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Et.prototype.get=function(e){var t=this.__data__;if(kt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return wt.call(t,e)?t[e]:void 0},Et.prototype.has=function(e){var t=this.__data__;return kt?void 0!==t[e]:Tt.call(t,e)},Et.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kt&&void 0===t?"__lodash_hash_undefined__":t,this};var At=Array.prototype.splice;function xt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(e){var t=this.__data__,r=_t(t,e);return!(r<0)&&(r==t.length-1?t.pop():At.call(t,r,1),--this.size,!0)},xt.prototype.get=function(e){var t=this.__data__,r=_t(t,e);return r<0?void 0:t[r][1]},xt.prototype.has=function(e){return _t(this.__data__,e)>-1},xt.prototype.set=function(e,t){var r=this.__data__,n=_t(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var It=bt(We,"Map");function Mt(e,t){var r,n,i=e.__data__;return("string"==(n=f(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ct(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new Et,map:new(It||xt),string:new Et}},Ct.prototype.delete=function(e){var t=Mt(this,e).delete(e);return this.size-=t?1:0,t},Ct.prototype.get=function(e){return Mt(this,e).get(e)},Ct.prototype.has=function(e){return Mt(this,e).has(e)},Ct.prototype.set=function(e,t){var r=Mt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Ot(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Ot.Cache||Ct),r}Ot.Cache=Ct;var Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/\\(\\)?/g,Ft=function(e){var t=Ot(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Rt,(function(e,r,n,i){t.push(n?i.replace(Pt,"$1"):r||e)})),t}));var Lt=Je?Je.prototype:void 0,jt=Lt?Lt.toString:void 0;function Nt(e){if("string"==typeof e)return e;if(Qe(e))return function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(e,Nt)+"";if(it(e))return jt?jt.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function zt(e,t){return Qe(e)?e:function(e,t){if(Qe(e))return!1;var r=f(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!it(e))||ot.test(e)||!at.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:Ft(function(e){return null==e?"":Nt(e)}(e))}function Dt(e){if("string"==typeof e||it(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Bt(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=zt(t,e)).length;null!=e&&r<n;)e=e[Dt(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n}var qt=function(){try{var e=bt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Ut=Object.prototype.hasOwnProperty;function Ht(e,t,r){var n=e[t];Ut.call(e,t)&&St(n,r)&&(void 0!==r||t in e)||function(e,t,r){"__proto__"==t&&qt?qt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}(e,t,r)}var Kt=/^(?:0|[1-9]\d*)$/;function Gt(e,t){var r=f(e);return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Kt.test(e))&&e>-1&&e%1==0&&e<t}function Qt(e,t,r){return null==e?e:function(e,t,r,n){if(!ut(e))return e;for(var i=-1,a=(t=zt(t,e)).length,o=a-1,u=e;null!=u&&++i<a;){var s=Dt(t[i]),c=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=o){var l=u[s];void 0===(c=n?n(l,s,u):void 0)&&(c=ut(l)?l:Gt(t[i+1])?[]:{})}Ht(u,s,c),u=u[s]}return e}(e,t,r)}var $t=function(){return We.Date.now()},Vt=/\s/;var Wt=/^\s+/;function Jt(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Vt.test(e.charAt(t)););return t}(e)+1).replace(Wt,""):e}var Xt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Zt=/^0o[0-7]+$/i,er=parseInt;function tr(e){if("number"==typeof e)return e;if(it(e))return NaN;if(ut(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ut(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var r=Yt.test(e);return r||Zt.test(e)?er(e.slice(2),r?2:8):Xt.test(e)?NaN:+e}var rr=Math.max,nr=Math.min;function ir(e,t,r){var n,i,a,o,u,s,c=0,l=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,a=i;return n=i=void 0,c=t,o=e.apply(a,r)}function v(e){return c=e,u=setTimeout(m,t),l?h(e):o}function d(e){var r=e-s;return void 0===s||r>=t||r<0||f&&e-c>=a}function m(){var e=$t();if(d(e))return g(e);u=setTimeout(m,function(e){var r=t-(e-s);return f?nr(r,a-(e-c)):r}(e))}function g(e){return u=void 0,p&&n?h(e):(n=i=void 0,o)}function y(){var e=$t(),r=d(e);if(n=arguments,i=this,s=e,r){if(void 0===u)return v(s);if(f)return clearTimeout(u),u=setTimeout(m,t),h(s)}return void 0===u&&(u=setTimeout(m,t)),o}return t=tr(t)||0,ut(r)&&(l=!!r.leading,a=(f="maxWait"in r)?rr(tr(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),y.cancel=function(){void 0!==u&&clearTimeout(u),c=0,n=s=i=u=void 0},y.flush=function(){return void 0===u?o:g($t())},y}var ar="exception collector loaded!",or="performance collector loaded!",ur="trace collector loaded!",sr="Your browser does not support performance.mark!",cr=function(e){return"There is already an duplicated ["+e+"]!"},lr={},fr=Uint8Array,pr=Uint16Array,hr=Uint32Array,vr=new fr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dr=new fr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mr=new fr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gr=function(e,t){for(var r=new pr(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new hr(r[30]);for(n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return[r,i]},yr=gr(vr,2),br=yr[0],kr=yr[1];br[28]=258,kr[258]=28;for(var wr=gr(dr,0)[1],Tr=new pr(32768),Er=0;Er<32768;++Er){var Sr=(43690&Er)>>>1|(21845&Er)<<1;Sr=(61680&(Sr=(52428&Sr)>>>2|(13107&Sr)<<2))>>>4|(3855&Sr)<<4,Tr[Er]=((65280&Sr)>>>8|(255&Sr)<<8)>>>1}var _r=function(e,t,r){for(var n=e.length,i=0,a=new pr(t);i<n;++i)e[i]&&++a[e[i]-1];var o,u=new pr(t);for(i=0;i<t;++i)u[i]=u[i-1]+a[i-1]<<1;if(r){o=new pr(1<<t);var s=15-t;for(i=0;i<n;++i)if(e[i])for(var c=i<<4|e[i],l=t-e[i],f=u[e[i]-1]++<<l,p=f|(1<<l)-1;f<=p;++f)o[Tr[f]>>>s]=c}else for(o=new pr(n),i=0;i<n;++i)e[i]&&(o[i]=Tr[u[e[i]-1]++]>>>15-e[i]);return o},Ar=new fr(288);for(Er=0;Er<144;++Er)Ar[Er]=8;for(Er=144;Er<256;++Er)Ar[Er]=9;for(Er=256;Er<280;++Er)Ar[Er]=7;for(Er=280;Er<288;++Er)Ar[Er]=8;var xr=new fr(32);for(Er=0;Er<32;++Er)xr[Er]=5;var Ir=_r(Ar,9,0),Mr=_r(xr,5,0),Cr=function(e){return(e+7)/8|0},Or=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(2==e.BYTES_PER_ELEMENT?pr:4==e.BYTES_PER_ELEMENT?hr:fr)(r-t);return n.set(e.subarray(t,r)),n},Rr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pr=function e(t,r,n){var i=new Error(r||Rr[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,e),!n)throw i;return i},Fr=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},Lr=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},jr=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return[Hr,0];if(1==i){var o=new fr(r[0].s+1);return o[r[0].s]=1,[o,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var u=r[0],s=r[1],c=0,l=1,f=2;for(r[0]={s:-1,f:u.f+s.f,l:u,r:s};l!=i-1;)u=r[r[c].f<r[f].f?c++:f++],s=r[c!=l&&r[c].f<r[f].f?c++:f++],r[l++]={s:-1,f:u.f+s.f,l:u,r:s};var p=a[0].s;for(n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var h=new pr(p+1),v=Nr(r[l-1],h,0);if(v>t){n=0;var d=0,m=v-t,g=1<<m;for(a.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));n<i;++n){var y=a[n].s;if(!(h[y]>t))break;d+=g-(1<<v-h[y]),h[y]=t}for(d>>>=m;d>0;){var b=a[n].s;h[b]<t?d-=1<<t-h[b]++-1:++n}for(;n>=0&&d;--n){var k=a[n].s;h[k]==t&&(--h[k],++d)}v=t}return[new fr(h),v]},Nr=function e(t,r,n){return-1==t.s?Math.max(e(t.l,r,n+1),e(t.r,r,n+1)):r[t.s]=n},zr=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new pr(++t),n=0,i=e[0],a=1,o=function(e){r[n++]=e},u=1;u<=t;++u)if(e[u]==i&&u!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[u]}return[r.subarray(0,n),t]},Dr=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Br=function(e,t,r){var n=r.length,i=Cr(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<n;++a)e[i+a+4]=r[a];return 8*(i+4+n)},qr=function(e,t,r,n,i,a,o,u,s,c,l){Fr(t,l++,r),++i[256];for(var f=jr(i,15),p=f[0],h=f[1],v=jr(a,15),d=v[0],m=v[1],g=zr(p),y=g[0],b=g[1],k=zr(d),w=k[0],T=k[1],E=new pr(19),S=0;S<y.length;++S)E[31&y[S]]++;for(S=0;S<w.length;++S)E[31&w[S]]++;for(var _=jr(E,7),A=_[0],x=_[1],I=19;I>4&&!A[mr[I-1]];--I);var M,C,O,R,P=c+5<<3,F=Dr(i,Ar)+Dr(a,xr)+o,L=Dr(i,p)+Dr(a,d)+o+14+3*I+Dr(E,A)+(2*E[16]+3*E[17]+7*E[18]);if(P<=F&&P<=L)return Br(t,l,e.subarray(s,s+c));if(Fr(t,l,1+(L<F)),l+=2,L<F){M=_r(p,h,0),C=p,O=_r(d,m,0),R=d;var j=_r(A,x,0);Fr(t,l,b-257),Fr(t,l+5,T-1),Fr(t,l+10,I-4),l+=14;for(S=0;S<I;++S)Fr(t,l+3*S,A[mr[S]]);l+=3*I;for(var N=[y,w],z=0;z<2;++z){var D=N[z];for(S=0;S<D.length;++S){var B=31&D[S];Fr(t,l,j[B]),l+=A[B],B>15&&(Fr(t,l,D[S]>>>5&127),l+=D[S]>>>12)}}}else M=Ir,C=Ar,O=Mr,R=xr;for(S=0;S<u;++S)if(n[S]>255){B=n[S]>>>18&31;Lr(t,l,M[B+257]),l+=C[B+257],B>7&&(Fr(t,l,n[S]>>>23&31),l+=vr[B]);var q=31&n[S];Lr(t,l,O[q]),l+=R[q],q>3&&(Lr(t,l,n[S]>>>5&8191),l+=dr[q])}else Lr(t,l,M[n[S]]),l+=C[n[S]];return Lr(t,l,M[256]),l+C[256]},Ur=new hr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hr=new fr(0),Kr=function(e,t,r,n,i,a){var o=e.length,u=new fr(n+o+5*(1+Math.ceil(o/7e3))+i),s=u.subarray(n,u.length-i),c=0;if(!t||o<8)for(var l=0;l<=o;l+=65535){var f=l+65535;f>=o&&(s[c>>3]=a),c=Br(s,c+1,e.subarray(l,f))}else{for(var p=Ur[t-1],h=p>>>13,v=8191&p,d=(1<<r)-1,m=new pr(32768),g=new pr(d+1),y=Math.ceil(r/3),b=2*y,k=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&d},w=new hr(25e3),T=new pr(288),E=new pr(32),S=0,_=0,A=(l=0,0),x=0,I=0;l<o;++l){var M=k(l),C=32767&l,O=g[M];if(m[C]=O,g[M]=C,x<=l){var R=o-l;if((S>7e3||A>24576)&&R>423){c=qr(e,s,0,w,T,E,_,A,I,l-I,c),A=S=_=0,I=l;for(var P=0;P<286;++P)T[P]=0;for(P=0;P<30;++P)E[P]=0}var F=2,L=0,j=v,N=C-O&32767;if(R>2&&M==k(l-N))for(var z=Math.min(h,R)-1,D=Math.min(32767,l),B=Math.min(258,R);N<=D&&--j&&C!=O;){if(e[l+F]==e[l+F-N]){for(var q=0;q<B&&e[l+q]==e[l+q-N];++q);if(q>F){if(F=q,L=N,q>z)break;var U=Math.min(N,q-2),H=0;for(P=0;P<U;++P){var K=l-N+P+32768&32767,G=K-m[K]+32768&32767;G>H&&(H=G,O=K)}}}N+=(C=O)-(O=m[C])+32768&32767}if(L){w[A++]=268435456|kr[F]<<18|wr[L];var Q=31&kr[F],$=31&wr[L];_+=vr[Q]+dr[$],++T[257+Q],++E[$],x=l+F,++S}else w[A++]=e[l],++T[e[l]]}}c=qr(e,s,a,w,T,E,_,A,I,l-I,c),!a&&7&c&&(c=Br(s,c+1,Hr))}return Or(u,0,n+Cr(c)+i)},Gr=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),Qr=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=Gr[255&r^t[n]]^r>>>8;e=r},d:function(){return~e}}},$r=function(e,t,r,n,i){return Kr(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n,!i)},Vr=function(e,t,r){for(var n=e(),i=e.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var u=n[o],s=a[o];if("function"==typeof u){t+=";"+s+"=";var c=u.toString();if(u.prototype)if(-1!=c.indexOf("[native code]")){var l=c.indexOf(" ",8)+1;t+=c.slice(l,c.indexOf("(",l))}else for(var f in t+=c,u.prototype)t+=";"+s+".prototype."+f+"="+u.prototype[f].toString();else t+=c}else r[s]=u}return[t,r]},Wr=[],Jr=function(e,t,r,n){var i;if(!Wr[r]){for(var a="",o={},u=e.length-1,s=0;s<u;++s)a=(i=Vr(e[s],a,o))[0],o=i[1];Wr[r]=Vr(e[u],a,o)}var c=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}({},Wr[r][1]);return function(e,t,r,n,i){var a=new Worker(lr[t]||(lr[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,r=t.$e$;if(r){var n=new Error(r[0]);n.code=r[1],n.stack=r[2],i(n,null)}else i(null,t)},a.postMessage(r,n),a}(Wr[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,c,function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t}(c),n)},Xr=function(){return[fr,pr,hr,vr,dr,mr,kr,wr,Ir,Ar,Mr,xr,Tr,Ur,Hr,_r,Fr,Lr,jr,Nr,zr,Dr,Br,qr,Cr,Or,Kr,$r,nn,Zr]},Yr=function(){return[tn,rn,en,Qr,Gr]},Zr=function(e){return postMessage(e,[e.buffer])},en=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},tn=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&en(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},rn=function(e){return 10+(e.filename&&e.filename.length+1||0)};function nn(e,t){return $r(e,t||{},0,0)}function an(e,t,r){return r||(r=t,t={}),"function"!=typeof r&&Pr(7),function(e,t,r,n,i,a){var o=Jr(r,n,i,(function(e,t){o.terminate(),a(e,t)}));return o.postMessage([e,t],t.consume?[e.buffer]:[]),function(){o.terminate()}}(e,t,[Xr,Yr,function(){return[on]}],(function(e){return Zr(on(e.data[0],e.data[1]))}),2,r)}function on(e,t){t||(t={});var r=Qr(),n=e.length;r.p(e);var i=$r(e,t,rn(t),8),a=i.length;return tn(i,t),en(i,a-8,r.d()),en(i,a-4,n),i}var un="undefined"!=typeof TextEncoder&&new TextEncoder,sn="undefined"!=typeof TextDecoder&&new TextDecoder;try{sn.decode(Hr,{stream:!0}),1}catch(e){}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hh:mm:ss",r=t,n=new Date;En(e,ce.Num)&&(n=new Date((new Date).setTime(e))),En(e,ce.Str)&&(n=new Date(e)),"Invalid Date"===n.toString()&&(n=new Date);var i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,String(n.getFullYear()).slice(4-RegExp.$1.length))),i)if(Object.prototype.hasOwnProperty.call(i,a)&&new RegExp("("+a+")").test(r)){var o=i[a];r=r.replace(RegExp.$1,1===RegExp.$1.length?String(o):("00"+o).slice(String(o).length))}return r}var ln=function(){if(!b||!b.now)return Date.now();var e=36e5,t=b.now(),r=Date.now(),n=b.timeOrigin?Math.abs(b.timeOrigin+t-r):e,i=n<e,a=b.timing&&b.timing.navigationStart,o="number"==typeof a?Math.abs(a+t-r):e;return i||o<e?n<=o?b.timeOrigin:a:r}(),fn="%c Ktracker",pn="color:#999",hn="color:#fff",vn={primary:"#1a7afb",info:"#909399",warn:"#faad14",error:"#f5222d",success:"#67C23A"},dn=["primary","info","warn","error","success"].reduce((function(e,t){var r;return e[t]=(r=vn[t],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m.log.apply(m,["%c".concat(cn(),": ").concat(fn," "),pn,"background:".concat(r,";").concat(hn)].concat(t))}),e}),{});function mn(e,t,r){try{if(!(t in e))return function(){};var n=e[t],i=r(n);if(xn(i))try{On(i,n)}catch(e){}return e[t]=i,function(){e[t]=n}}catch(e){return function(){}}}function gn(e){var t=parseFloat(e);return t==t&&In([t,String(t)],e)}function yn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bn(e,t){try{return e instanceof t}catch(e){return!1}}function kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={defaultValue:e,replacer:null,space:void 0},n=l(r,t),i=n.defaultValue,a=n.replacer,o=n.space;try{var u=JSON.stringify(e,a,o);return _n(u)?i:u}catch(e){return i}}function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En(e,ce.Str)?e:kn(e,t)}function Tn(e){return Object.prototype.toString.call(e).slice(8,-1)}function En(e,t){return Tn(e)===t}function Sn(e){return e&&"object"===f(e)&&Object.keys(e).length>0}function _n(e){return In([null,void 0],e)}function An(e){return En(e,ce.Arr)&&e.length>0}function xn(e){return"function"==typeof e}function In(e,t){return e.indexOf(t)>-1}function Mn(e,t){var r=l({},e);if(En(t,ce.Arr))for(var n=0,i=t.length;n<i;n+=1){delete r[t[n]]}if(xn(t))for(var a in r)yn(r,a)&&t(r[a],a,r)&&delete r[a];return r}function Cn(e){var t=l({},e);for(var r in t)yn(t,r)&&(t[r]=wn(t[r],{defaultValue:t[r]}));return t}function On(e,t){var r=t.prototype||{};e.prototype=t.prototype=r,Rn(e,P,t)}function Rn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&"object"===f(e))try{Object.defineProperty(e,t,{value:r,enumerable:n,writable:!0,configurable:!0})}catch(e){dn.warn(e)}}var Pn,Fn,Ln,jn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this.items=Object.create(null),this.first=null,this.last=null,this.size=0,this.max=t,this.resetTtl=n,this.ttl=r}return c(e,[{key:"delete",value:function(e){if(yn(this.items,e)){var t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}},{key:"evict",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||this.size>0){var t=this.first;delete this.items[t.key],0==--this.size?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}},{key:"get",value:function(e){var t;if(yn(this.items,e)){var r=this.items[e];this.ttl>0&&r.expiry<=Date.now()?this.delete(e):(t=r.value,this.set(e,t,!0))}return t}},{key:"set",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.resetTtl;if(n||yn(this.items,e)){if((r=this.items[e]).value=t,i&&(r.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==r){var a=this.last,o=r.next,u=r.prev;this.first===r&&(this.first=r.next),r.next=null,r.prev=this.last,a.next=r,null!==u&&(u.next=o),null!==o&&(o.prev=u)}}else this.max>0&&this.size===this.max&&this.evict(!0),r=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},1==++this.size?this.first=r:this.last.next=r;return this.last=r,this}}]),e}(),Nn={},zn={},Dn={},Bn=new jn(30,0,!1),qn=-1!==(null===(Ln=null===(Fn=null===(Pn=null===window||void 0===window?void 0:window.location)||void 0===Pn?void 0:Pn.search)||void 0===Fn?void 0:Fn.indexOf)||void 0===Ln?void 0:Ln.call(Fn,"__testing=true")),Un="https://actionstat.qunhequnhe.com",Hn=(null===window||void 0===window?void 0:window.pyBellInjection)||qn?Un:"https://actionstat.kujiale.com",Kn=(null===window||void 0===window?void 0:window.pyBellInjection)||qn?Un:"https://actiontrack.kujiale.com:8888",Gn=oi()?Ue:qe,Qn={newEventUrl:"".concat(Gn,"/api/v2/fe/event"),newErrorUrl:"".concat(Gn,"/api/v2/fe/exception"),perfApiUrl:"".concat(Gn,"/api/v3/rum/performance"),traceApiUrl:"".concat(Gn,"/api/v2/fe/trace"),bizAnalyseUrl:"".concat(Hn,"/api/toolbehaviors"),multiAnalyseUrl:"".concat(Hn,"/api/multi-behaviors"),bizMonitorUrl:"".concat(Kn,"/actiontrack/api/toolbehaviors"),multiMonitorUrl:"".concat(Kn,"/actiontrack/api/multi-behaviors"),autoInit:!0,initException:!0,initPagePerformance:!0,initTraceCollector:!1,initBizEvent:!0,getUnhandledrejection:!0,getTryCatch:!0,getPagePerformance:!0,getResourcePerformance:!0,getAjaxPerformance:!0,getFetchPerformance:!1,localReport:!1,maxStackDepth:10,userWhiteList:"",visitSample:.5,perfSample:1,apiSample:1,resSample:1,bizEventSample:1,longTaskSample:.1,debug:!1};function $n(e,t){var r,n=l({},t);for(r in e){var i=yn(t,r)?t[r]:Yn(r);if(In(x,i))n[r]=e[r];else switch(i){case"true":case!0:n[r]=!0;break;case"false":case!1:n[r]=!1;break;default:if(gn(i)){var a=parseInt(i,10);n[r]=a}n[r]=i}}return n}function Vn(){var e=l({},d.g_ktrackerOptions||{},d.ktrackerOptions||{}),t=$n(Qn,e);return pa.setOptions(t),t}function Wn(){var e=l({},d.g_ktrackerOptions||{},d.ktrackerOptions||{});return $n(Qn,e)}function Jn(e){try{return d.location[e]||null}catch(e){return null}}function Xn(e){try{return g[e]||null}catch(e){return null}}function Yn(e){var t=g.querySelector('meta[name="'.concat(e,'"]'));return t?t.getAttribute("content"):""}function Zn(){var e=d.screen,t=e.width,r=e.height,n={width:d.innerWidth||g.documentElement.clientWidth,height:d.innerHeight||g.documentElement.clientHeight},i=n.width,a=n.height;return{screenSize:"".concat(t,"x").concat(r),viewport:"".concat(i,"x").concat(a)}}function ei(){try{return(null==y?void 0:y.userAgent)||""}catch(e){return""}}function ti(e){var t={};if(!e)return t;try{e.split("\n").forEach((function(e){if(e&&e.trim()){var r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase();if(n){var i=e.substring(r+1).trim();t[n]=t[n]?t[n]+", "+i:i}}}))}catch(e){}return t}function ri(e){var t,r={};try{null===(t=e.headers)||void 0===t||t.forEach((function(e,t){var n=String(e).trim();n&&(r[t]=r[t]?[r[t],n].join(", "):n)}))}catch(e){}return r}function ni(e,t){var r={};try{r.bizErrCode=t[Re];var n=gi(t[Pe]);if(r.bizErrMsg=n?n.slice(0,100):void 0,In(t[Me]||"","application/json")){r.bizcode=Li(e,Le);var i=Li(e,je);r.bizMsg=i?i.slice(0,100):void 0}}catch(e){}return r}function ii(e,t){try{for(var r,n=e,i=[],a=0,o=0,u=" > ".length;n&&a++<5&&!("html"===(r=ai(n,t))||a>1&&o+i.length*u+r.length>=80);)i.push(r),o+=r.length,n=n.parentNode;return i.reverse().join(" > ")}catch(e){return"<unknown>"}}function ai(e,t){var r,n,i,a,o,u=e,s=[];if(!u||!u.tagName)return"";s.push(u.tagName.toLowerCase());var c=t&&t.length?t.filter((function(e){return u.getAttribute(e)})).map((function(e){return[e,u.getAttribute(e)]})):null;if(c&&c.length)c.forEach((function(e){s.push("[".concat(e[0],'="').concat(e[1],'"]'))}));else if(u.id&&s.push("#".concat(u.id)),(r=u.className)&&En(r,ce.Str)){var l=(n=r.split(/\s+/)).length;for(o=0;o<l;o++)s.push(".".concat(n[o]))}var f=["type","name","title","alt"],p=f.length;for(o=0;o<p;o++)i=f[o],(a=u.getAttribute(i))&&s.push("[".concat(i,'="').concat(a,'"]'));return s.join("")}function oi(){var e=Jn("hostname");return M.some((function(t){return function(e,t,r){var n=(e||"").length;(r=void 0===r?n:+r)<0||r!=r?r=0:r>n&&(r=n);var i=r;return(r-=(t||"").length)>=0&&e.slice(r,i)===t}(e,t)}))}function ui(){var e=Jn("hostname");return I.some((function(t){return e===t}))}function si(){return Wn().localReport}var ci,li,fi,pi=function(){var e=ei().toLocaleLowerCase();if(e&&!J.some((function(t){return In(e,t)})))for(var t=0,r=W.length;t<r;t++){var n=W[t];if(In(e,n))return n}}(),hi=ui()&&!si()||!!pi;function vi(e){return!hi&&!1!==e}function di(e,t){return vi(t)?e:te}function mi(e){var t;return null===(t=null==e?void 0:e.outerHTML)||void 0===t?void 0:t.slice(0,100)}function gi(e){if(!e||!En(e,ce.Str))return"";try{return d.atob(e)||""}catch(e){return""}}function yi(e){return 1===e.nodeType}function bi(e){return 200<=e&&e<300||In([304],e)}function ki(e){return yn(zn,e)}function wi(e){for(var t=e.length,r=e.length-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}function Ti(e){try{return e?En(e,ce.Str)?wi(e):En(e,ce.FormData)?Array.from(e.values()).reduce((function(e,t){return e+(t&&t.size||wi(String(t)))}),0):"size"in e||"byteLength"in e?e.size||e.byteLength||0:wi(wn(e,{defaultValue:""})):0}catch(e){return 0}}function Ei(e){return new Promise((function(t,r){var n=an(function(e,t){if(t){for(var r=new fr(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(un)return un.encode(e);var i=e.length,a=new fr(e.length+(e.length>>1)),o=0,u=function(e){a[o++]=e};for(n=0;n<i;++n){if(o+5>a.length){var s=new fr(o+8+(i-n<<1));s.set(a),a=s}var c=e.charCodeAt(n);c<128||t?u(c):c<2048?(u(192|c>>6),u(128|63&c)):c>55295&&c<57344?(u(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++n))>>18),u(128|c>>12&63),u(128|c>>6&63),u(128|63&c)):(u(224|c>>12),u(128|c>>6&63),u(128|63&c))}return Or(a,0,o)}(e),(function(e,i){return n(),e?r(e):t(i)}))}))}function Si(e,t){return En(e,ce.Bool)?e:t}function _i(e,t){return!e||In(D,e)?t:e}function Ai(e,t){var r=d.setTimeout((function(){r&&(d.clearTimeout(r),r=null),xn(e)&&e()}),t);return r}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGzip,r={};return t&&(r["Content-Encoding"]="gzip"),r["Content-Type"]=t||e.isImmediate?"text/plain; charset=UTF-8":"application/json; charset=utf-8",r}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l({useKeepalive:e.isImmediate,useGzip:true},e)}var Mi=-1===(null===(fi=null===(li=null===(ci=null===window||void 0===window?void 0:window.location)||void 0===ci?void 0:ci.search)||void 0===li?void 0:li.indexOf)||void 0===fi?void 0:fi.call(li,"__testing=true"));function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l({useKeepalive:e.isImmediate,useGzip:!(null==e?void 0:e.single)&&(!(null===window||void 0===window?void 0:window.pyBellInjection)&&Mi)},e)}function Oi(e){return Sn(e)||An(e)?wn(e,{defaultValue:""}):e}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(t-e)+e}function Pi(e){Rn(e,"isInteractive",ki("tti"),!0)}function Fi(e){return En(e,ce.Arr)?e.slice(-1).pop():null}function Li(e,t){try{var r=new RegExp('"'.concat(t,'"\\s*:\\s*"?([^",}]+)"?')).exec(e);return(null==r?void 0:r[1])||void 0}catch(e){}}function ji(e){var t;try{ui()&&si()&&(Array.isArray(e)?null==e||e.forEach((function(e){e.serviceWithStage="localhost"})):(e.serviceWithStage="localhost",null===(t=null==e?void 0:e.resource)||void 0===t||t.forEach((function(e){e.serviceWithStage="localhost"}))))}catch(e){dn.error("处理 serviceWithStage 出错",e)}}function Ni(e){var t=e||{},r={on:function(e,n){var i=t[e];return Tn(i)!==ce.Arr&&(t[e]=i=[]),In(i,n)?(dn.warn(cr("[".concat(String(e),"] of [").concat(function(e){try{return e&&xn(e)&&e.name||C}catch(e){return C}}(n),"]"))),r):(i.push(n),r)},off:function(e,n){if(!n)return t[e]=[],r;var i=t[e];return i?(i.splice(i.indexOf(n)>>>0,1),r):r},emit:function(e,n){var i=t[e];return i&&i.slice().forEach((function(e){e(n)})),r},pick:function(e){return t[e]||[]},emitDebounce:function(){dn.warn('"pubsub.emitDebounce" has been deprecated!')},emitThrottle:function(){dn.warn('"pubsub.emitThrottle" has been deprecated!')}};return r}function zi(){var e=A();if(e&&e<=4)return!0;var t=_();return!!(t&&t<=4)}function Di(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return t}}function Bi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return En(e,ce.Num)?parseFloat(e.toFixed(t)):0}function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return gn(e)&&parseFloat(e)||t}function Ui(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!gn(t)||!gn(e)||r&&t<=0?0:Math.max(0,Bi(e-t))}
/*! js-cookie v3.0.1 | MIT */
function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var Ki=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=Hi({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var a=r[i].split("="),o=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(n[u]=t.read(o,u),e===u)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",Hi({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Hi({},this.attributes,t))},withConverter:function(t){return e(Hi({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Gi=function(){return"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)};function Qi(e){return{setItem:function(t,r){d[e].setItem(t,wn(r))},getItem:function(t,r){var n=d[e].getItem(t);return function(e,t){try{var r=JSON.parse(e);return _n(r)?t:r}catch(e){return t}}(n,r||n)},removeItem:function(t){d[e].removeItem(t)}}}var $i=Qi("localStorage"),Vi=Qi("sessionStorage"),Wi=Gi(),Ji=function(){try{var e=Vi.getItem(z);return e||(e=Gi(),Vi.setItem(z,e)),e}catch(e){var t=Gi();return Vi.setItem(z,t),t}}();function Xi(e,t){if(e&&t){for(var r=0,n=0,i=0,a=e.length;i<a;i++)r+=e.charCodeAt(i);for(var o=0,u=t.length;o<u;o++)n+=t.charCodeAt(o);var s=r+""+t.charCodeAt(t.length-1)+n+e.charCodeAt(e.length-1);return s&&(s+="ABCDEFGHJKMNPQRSTWXYZ"[parseInt(s[s.length-1],10)]),s}}function Yi(e){var t,r=(t="qhdi",Ki.get(t)||"");return r||(r=e||Wi),r}var Zi=Yi();function ea(e){if(e){var t=e.nodeName;if(e.hasChildNodes()&&ta(e),"SCRIPT"===t)e.getAttribute("type")===B&&ra(e)}}function ta(e){if(e){var t=e.querySelectorAll('script[type="'.concat(B,'"]'));if(t&&t.length>0)for(var r=0,n=t.length;r<n;r++){var i=t[r];yi(i)&&ra(i)}}}function ra(e){if(e){var t=e.getAttribute(oe);if(t){var r=e.getAttribute(se)||"",n=e.getAttribute(ue)||"";Dn[t]=l({},Dn[t],{pn:t,pv:r,ps:n})}}}function na(e){g&&T("DOMContentLoaded",(function t(r){e(r),E("DOMContentLoaded",t)}))}function ia(e){if("complete"===g.readyState)return e();k("load",(function t(){e(),w("load",t)}))}function aa(e){k("beforeunload",e)}function oa(){var e=g.querySelector('meta[kjl-global="userid"]');return e?e.getAttribute("content"):d.g_userId?d.g_userId:d.g_user&&d.g_user.userId?d.g_user.userId:""}function ua(){var e=Be;if(!d.__PUB_BUCKET_CONFIG__||!d.__PUB_BUCKET_CONFIG__.buckets)return e;var t=d.__PUB_BUCKET_CONFIG__.buckets,r=t.isKA,n=t.isSKA;return n&&n.optimized&&(e=ze),e===Be&&r&&r.optimized&&(e=De),e}var sa,ca=-1,la=function(e){k("pageshow",(function(t){t.persisted&&(ca=t.timeStamp,e(t))}),!0)},fa=function(){function e(){var t=this;u(this,e),this.options=Qn,this.metadata={},this.state={serveTimeDiff:0},this.genMetadata(l({timeOrigin:Bi(ln),refer:Xn("referrer"),visitId:Wi,ktrSessionId:Ji,ua:ei(),clientIp:"",isRestore:!1,deviceMemory:_()||0,hardwareConcurrency:A()||0,isLowEndDevice:zi(),qhdi:Zi},Zn(),function(){var e,t=y&&y.connection||{},r=t.effectiveType||"4g",n=!!t.saveData;return{effectiveType:r,saveData:n,downlink:(e=t.downlink,En(e,ce.Num)?Bi(1024*e/8):0),connectionType:t.type,networkRtt:t.rtt,networkOnline:!(y&&!_n(y.onLine))||y.onLine,isLowEndNetwork:Di(r,n)}}())),la((function(){t.setMetadata("isRestore",!0)})),ia((function(){t.setMetadata(Zn())}))}return c(e,[{key:"curOptions",get:function(){return this.options}},{key:"setOptions",value:function(e){this.options=e}},{key:"clearOptions",value:function(){this.options=void 0}},{key:"setState",value:function(e,t){this.state[e]=t}},{key:"getState",value:function(e){return e?this.state[e]:this.state}},{key:"genMetadata",value:function(e){var t,r,n=this.getMetadata(),i=n.pfeBu||Yn("feBu"),a=function(e){var t=e.__pn,r=e.__pv,n=e.__pstage,i=t,a=r;if(!i||!a){var o=document.querySelector('script[type="'.concat(B,'"][pt="page"]'));i=(null==o?void 0:o.getAttribute(oe))||null,a=(null==o?void 0:o.getAttribute(se))||null}var u=[];if(!In(q,a))for(var s in Dn){var c=Dn[s];c&&In(q,c.pv)&&u.push(s)}return{__pn:i,__pv:a,__greyPns:An(u)?u.join(","):null,__pstage:n||Yn("serviceWithStage"),__srcUrl:Jn("href")}}(n);return this.setMetadata(l({feBu:i,pfeBu:i,feVersion:n.feVersion||Yn("feVersion"),serviceWithStage:n.serviceWithStage||Yn("serviceWithStage"),toolVersion:d.app_version,userId:(t=n.userId,r=oa(),!r||In(x,r)?t||Zi:r||t||""),obsRootAccountId:d.g_sessionAccount?d.g_sessionAccount.obsRootAccountId:d.__TOOL_CONFIG__&&d.__TOOL_CONFIG__.obsRootAccountId||null,userLevel:ua(),designId:d.g_designId,levelId:d.g_levelId,qhdi:n.qhdi||Yi()},a,e)),this.getMetadata()}},{key:"setMetadata",value:function(e,t){"object"===f(e)?this.metadata=!1!==t?l({},this.metadata,e):e:this.metadata[e]=t}},{key:"getMetadata",value:function(e){return e?this.metadata[e]:this.metadata}},{key:"pagePubMeta",get:function(){var e=this.metadata,t=e.__pv;return{pn:e.pfeBu,ps:e.feVersion,pv:_i(t,(t?e:this.genMetadata()).serviceWithStage)}}},{key:"emitter",get:function(){return this.emitterIns=this.emitterIns||Ni()}},{key:"emitExclude",value:function(e,t){var r=t;return In([Ne.ExApiErr,Ne.ExApi],e)&&(r=l({},t,{xhrDetail:{api:t.api,async:t.async,method:t.method,traceId:t._uniqueId}})),this.emitter.pick(e).some((function(e){var t=!1;try{t=!!e(r)}catch(e){dn.error(e)}return t}))}},{key:"currentTime",value:function(e){var t=this.getMetadata("timeOrigin");return Bi(e>1e12?e:t?t+(e||b.now()):Date.now())}},{key:"currentFixTime",value:function(e){return Bi(this.currentTime(e)+this.getState("serveTimeDiff"))}},{key:"currentAbsoluteTime",value:function(e){return Bi(b?b.now():Date.now()-this.getMetadata("timeOrigin"),e)}}]),e}(),pa=new fa;function ha(e){var t=Object.create(null);if(!e)return t;for(var r=e.split("&"),n=0,i=r.length;n<i;n++){var a=r[n].split("="),o=decodeURIComponent(a[0]);if(0!==o.length){var u=decodeURIComponent((a[1]||"").replace(/\+/g," ")),s=t[o];void 0!==s?Array.isArray(s)?t[o].push(u):t[o]=[s,u]:t[o]=u}}return t}function va(e){var t=Object.create(null);return En(e,ce.Str)?ha(ya(e).search):t}function da(e){if(!e)return"";var t=ya(e);if(!In(t.pathname,"."))return"";var r=H.exec(t.pathname);if(An(r)){var n=r[4].toLocaleLowerCase(),i=K.exec(n);return An(i)?i[0]:n}return""}function ma(e){if(!e)return!0;try{var t=ya(e),r=t.host;if(r&&Y.some((function(e){return In(r,e)})))return!0;var n=!1,i=t.pathname;return i?n=ee.some((function(t){return t instanceof RegExp?t.test(i):!!En(t,ce.Str)&&In(e,t)})):n}catch(e){return!0}}!function(e){e.legacyEvent="legacyEvent",e.event="sendEventV2",e.analyseEvent="sendAnalyseEvent",e.legacyError="legacyError",e.error="sendErrorV2"}(sa||(sa={}));var ga,ya=(ga=g.createElement("a"),function(e){var t={hash:"",host:"",hostname:"",href:e,origin:"",pathname:"",port:"",protocol:"",search:""};return e&&En(e,ce.Str)?(ga.setAttribute("href",e),t.hash=ga.hash?ga.hash.replace(/^#/,""):"",t.host=ga.host,t.hostname=ga.hostname,t.href=ga.href||e,t.origin=ga.origin||"",t.pathname="/"===ga.pathname.charAt(0)?ga.pathname:"/"+ga.pathname,t.port=ga.port,t.protocol=ga.protocol?ga.protocol.replace(/:$/,""):"",t.search=ga.search?ga.search.replace(/^\?/,""):"",t):t});function ba(e){if(!e||!En(e,ce.Str))return!1;try{return U.test(e)}catch(e){return!1}}var ka=["isConstructor","isEval","isNative","isToplevel"],wa=["columnNumber","lineNumber"],Ta=["args"],Ea=[].concat(ka,wa,["fileName","functionName","source"],Ta),Sa=function(){function e(t){if(u(this,e),t)for(var r=0,n=Ea.length;r<n;r++){var i=Ea[r];if(yn(t,i)){var a=t[i];if(void 0===a)continue;if(In(ka,i)){this[i]=Boolean(a);continue}if(In(Ta,i)){if(!Array.isArray(a))throw new TypeError("Args must be an Array");this.args=a;continue}if(In(wa,i)){if(!gn(a))throw new TypeError(i+" must be a Number");this[i]=Number(a);continue}this[i]=String(a)}}}return c(e,[{key:"toString",value:function(){return(this.functionName||"{anonymous}")+("("+(this.args||[]).join(",")+")")+(this.fileName?"@"+this.fileName:"")+(gn(this.lineNumber)?":"+this.lineNumber:"")+(gn(this.columnNumber)?":"+this.columnNumber:"")}}],[{key:"fromString",value:function(t){var r,n,i,a=t.indexOf("("),o=t.lastIndexOf(")"),u=t.substring(0,a),s=t.substring(a+1,o).split(","),c=t.substring(o+1);if(0===c.indexOf("@")){var l=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(c);l&&(r=l[1],n=l[2]?Number(l[2]):void 0,i=l[3]?Number(l[3]):void 0)}return new e({functionName:u,args:s,fileName:r,lineNumber:n,columnNumber:i})}}]),e}(),_a=/^\s*at .*(\S+\:\d+|\(native\))/m,Aa=/^(eval@)?(\[native code\])?$/;function xa(e){return Z.test(e)}function Ia(e){var t=ha(Fi(e.replace(/[\[\]]/g,"\\$&").split("?"))),r=t.pn,n=t.ps;return n&&(In(n,":")&&(n=n.split(":")[0]),In(n," ")&&(n=n.split(" ")[0])),{pn:r,ps:n}}function Ma(e){if(!In(e,":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return t?[t[1],t[2],t[3]]:[]}function Ca(e){return e.stack?e.stack.match(_a)?function(e){var t=!0,r=[],n=(e.stack||"").split("\n").filter((function(e){return!!e.match(_a)})).map((function(e){var n=Ia(e),i=n.pn,a=n.ps;i&&a&&r.push({pn:i,ps:a}),In(e,"(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var o=[];try{o=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1)}catch(e){}var u=Ma(o.pop()),s=o.join(" ")||void 0,c=In(["eval","<anonymous>"],u[0])?void 0:u[0];return t=t&&xa(c),new Sa({functionName:s,fileName:c,lineNumber:u[1],columnNumber:u[2],source:e})}));return t&&!An(r)&&r.push({pn:j}),{stackFrames:n,pubAppInfos:r}}(e):function(e){var t=!0,r=[],n=(e.stack||"").split("\n").filter((function(e){return!e.match(Aa)})).map((function(e){var n=Ia(e),i=n.pn,a=n.ps;if(i&&a&&r.push({pn:i,ps:a}),In(e," > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),In(e,"@")||In(e,":")){var o=/((.*".+"[^@]*)?[^@]*)(?:@)/,u=e.match(o),s=u&&u[1]?u[1]:void 0,c=Ma(e.replace(o,"")),l=c[0];return t=t&&xa(l),new Sa({functionName:s,fileName:l,lineNumber:c[1],columnNumber:c[2],source:e})}return new Sa({functionName:e})}));return t&&!An(r)&&r.push({pn:j}),{stackFrames:n,pubAppInfos:r}}(e):{stackFrames:[],pubAppInfos:[]}}function Oa(e){return!(!e||"object"!==f(e))&&X.every((function(t){return t in e}))}function Ra(e){return!e||!Bn.get(e)&&(Bn.set(e,!0),!0)}var Pa=Error.captureStackTrace||function(e){return(Oa(e)&&e.stack?e:new Error).stack};function Fa(e,t){var r=pa.pagePubMeta,n=e.pn?e:(null==t?void 0:t.pn)?t:r,i=null==n?void 0:n.pn,a=Dn[i]||n;return{pn:a.pn||r.pn,ps:a.ps||r.ps,pv:_i((null==a?void 0:a.pv)||pa.curOptions[i],r.pv)}}function La(e){var t=function(){var e=new Error(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"errorCapturer");return Pa(e),e}();return ja(t,e)}function ja(e,t){var r=pa.pagePubMeta,n={pubAppInfo:r,parsedStack:ae};if(!e)return n;var a=l({depth:pa.curOptions.maxStackDepth,isReverse:!1,isParseStack:!1,isFirstApp:!0},t),o=a.depth,u=a.isReverse,s=a.isParseStack,c=a.isFirstApp;if(!e.stack)return s&&(n.parsedStack.message=e.message),n.pubAppInfo=Fa(r),n;try{var f,p=Ca(e),h=p.stackFrames,v=p.pubAppInfos;if(u&&(f=Fi(v)),!u){var d=i(v,2),m=d[0],g=d[1];f=c?m:g||m}if((null==f?void 0:f.pn)&&(n.pubAppInfo=Fa({pn:f.pn},r)),s){for(var y=[],b=0,k=h.length;b<k&&!(b>=o);b++){var w=h[b];y.push({url:w.fileName,func:w.functionName||C,args:w.args||[],line:w.lineNumber,column:w.columnNumber})}var T=y[0]||{},E=T.line,S=T.column;n.parsedStack={column:S,line:E,stack:y,name:e.name,message:e.message,originStack:e.stack}}return n}catch(t){return s&&(n.parsedStack={name:e.name,message:e.message,stack:[],originStack:e.stack}),n.pubAppInfo=Fa(r),n}}function Na(){return!!d.MutationObserver}function za(){return!!d.PerformanceObserver}function Da(){return b&&!!b.getEntriesByType&&!!b.now&&!!b.mark}function Ba(){return!!(null==y?void 0:y.sendBeacon)}function qa(){return Ua()&&"keepalive"in Request.prototype}function Ua(){var e=!0;try{new Headers,new Request(""),new Response}catch(t){e=!1}return e&&xn(d.fetch)}var Ha="POST";function Ka(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(null==t?void 0:t.debug)&&(t.isSuccess?dn.info("send with "+t.type+" success [url: "+e+"]"):dn.error("send with "+t.type+" error [url: "+e+"]"))}function Ga(e,t,r){return new Promise((function(n){var i=y.sendBeacon(e,t);Ka(e,l({isSuccess:i,type:"beacon"},r)),n(i)}))}function Qa(e,t,r){return h(this,void 0,void 0,n().mark((function i(){var a,o,u;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=xi(r),o=!1,n.prev=2,n.next=5,fetch(e,{method:r.useMethod||Ha,body:t,keepalive:r.useKeepalive,headers:a});case 5:u=n.sent,o=bi(u.status),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:return Ka(e,l({isSuccess:o,type:"fetch"},r)),n.abrupt("return",o);case 13:case"end":return n.stop()}}),i,null,[[2,9]])})))}function $a(e,t,r){return new Promise((function(n){var i=new XMLHttpRequest;i.timeout=2e3,i.onloadend=function(){var t=bi(i.status);Ka(e,l({isSuccess:t,type:"xhr"},r)),xn(r.onXhrLoadend)&&r.onXhrLoadend(i),n(t)},i.open(r.useMethod||Ha,e);var a=xi(r);Object.keys(a).forEach((function(e){i.setRequestHeader(e,a[e])})),i.send(t)}))}function Va(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t?qa()?Qa(e,t,r):r.useKeepalive?Ba()?Ga(e,t,r):void 0:$a(e,t,r):re(!1)}function Wa(e){return function(t){return xn(t)?(pa.emitter.on(e,t),function(){return pa.emitter.off(e,t)}):(dn.error("The handler must be a function"),te)}}function Ja(e){return e===sa.analyseEvent}function Xa(e,t){return Va(function(e,t){var r=pa.curOptions;return(Ja(e)?r.bizAnalyseUrl:r.bizMonitorUrl)+"/"+t.eventType+"/log"}(e,t),Oi(t))}function Ya(e,t){var r=pa.curOptions,n=Ja(e),i=n?r.multiAnalyseUrl:r.multiMonitorUrl,a="";return t&&!n&&(a=t.useGzip?"/gzip":t.isImmediate?"/text":a),i+a}function Za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ja(e)?l(t,{isImmediate:!1,useGzip:!1,useKeepalive:t.isImmediate}):t}var eo,to,ro,no=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return Ya(e,Za(e,l({},t,r)))}},io=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t.length<=0))return{url:no(e,r),options:Ii(Za(e,r)),payload:t}}},ao=["timeOrigin","saveData","clientIp","isInteractive","isLowEndDevice","isLowEndNetwork","isRestore","networkOnline","pfeBu","feVersion"],oo=-1===(null===(ro=null===(to=null===(eo=null===window||void 0===window?void 0:window.location)||void 0===eo?void 0:eo.search)||void 0===to?void 0:to.indexOf)||void 0===ro?void 0:ro.call(to,"__testing=true")),uo=function(e,t,r,n){var i={};if(Tn(e)===ce.Str&&(i.eventType=e,i.data=t),"object"===f(e)&&(i.eventType=e.eventType,i.data=t||e),i.eventType&&i.data){var a=fo({type:sa.legacyEvent,param:i,options:r});return!(null===window||void 0===window?void 0:window.pyBellInjection)&&oo?So.actiontrackQueue.push(l(l({},a),{ktrackerApi:"sendEvent"})):(ji(a),Xa(sa.event,a)),xn(n)&&n(!0),re(!0)}},so=lo(sa.event),co=lo(sa.analyseEvent);function lo(e){return function(t,r,n){if(t.eventType&&Sn(t.data)){var i=fo({param:t,options:r?Mn(r,["single"]):void 0});return!0===(null==r?void 0:r.single)?(ji(i),Xa(e,i)):!(null===window||void 0===window?void 0:window.pyBellInjection)&&oo?(e===sa.event&&So.actiontrackQueue.push(l(l({},i),{ktrackerApi:"sendEventV2"})),e===sa.analyseEvent&&So.actionstatQueue.push(l(l({},i),{ktrackerApi:"sendAnalyseEvent"}))):(ji(i),Xa(e,i)),xn(n)&&n(!0),re(!0)}}}function fo(e){var t,n=e.type,i=e.param,a=e.options,o=i.eventType,u=i.data,s=i.labels,c=i.level,f=l({},Mn(pa.genMetadata(),ao),a),h=r({eventType:o},"_action_behavior",o);if(n===sa.legacyEvent)return l(f,h,{payload:u});var v=l({},s),m=v.pubAppName,g=v.feBu,y=p(v,["pubAppName","feBu"]),b=g||m,k=b?Fa({pn:b}):La({isFirstApp:!i.isInvokeOtherApp}).pubAppInfo,w=l(f,(r(t={level:c},"__MonitorMetricPayload__",wn(u)),r(t,"feBu",k.pn),r(t,"resourceId",k.ps),r(t,"serviceWithStage",k.pv),r(t,"timestamp",pa.currentFixTime()),r(t,"levelId",d.g_levelId),t));return l(function(e,t){var r=l({},e);for(var n in t)if(yn(t,n)){var i=t[n];yn(e,n)&&In(x,i)||(r[n]=i)}return r}(w,l({},y,u)),h)}function po(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.start,u=void 0!==o&&o,s=a.middle,c=void 0===s||s,l=a.once,f=void 0!==l&&l,p=0,h=!1;function v(){for(var a=this,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(r=this,n=s,!h){var d=Date.now()-p;p=Date.now(),u?(u=!1,e.apply(this,s),f&&v.cancel()):(c&&d<i||!c)&&(clearTimeout(t),t=setTimeout((function(){p=Date.now(),e.apply(a,s),f&&v.cancel()}),c?i-d:i))}}return v.cancel=function(){clearTimeout(t),h=!0},v.flush=function(){clearTimeout(t),e.apply(r,n)},v}function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.start,i=void 0!==n&&n,a=r.middle,o=void 0!==a&&a,u=r.once,s=void 0!==u&&u;return po(e,t,{start:i,middle:o,once:s})}function vo(e,t,r){var n={},i=setInterval((function(){n={}}),1e3*t),a=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ut(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ir(e,t,{leading:n,maxWait:t,trailing:i})}((function(e,t,n){try{e.forEach((function(e){try{var i=fo({param:{eventType:"ktracker_report_times_limit",data:{ktrackerReportTimes:t,ktrackerReportTimesLimit:r},labels:{originErrorMessage:e.message,originEventType:e.eventType,feBu:e.feBu,ktrackerApi:e.ktrackerApi,warnTip:n}}});ji(i),"sendErrorV2"===e.ktrackerApi?Xa(sa.error,i):Xa(sa.analyseEvent,i)}catch(e){}}))}catch(e){}}),1e3*t,{leading:!1,trailing:!0});function o(){try{for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];i.forEach((function(t){if("sendError"!==t.ktrackerApi&&"sendEvent"!==t.ktrackerApi){var i="sendErrorV2"===t.ktrackerApi?t.message:t.eventType,o="sendErrorV2"===t.ktrackerApi?"error.message":"eventType",u=Bt(n,[t.feBu,t.ktrackerApi,i]);Qt(n,[t.feBu,t.ktrackerApi,i],u?u+1:1);var s=Bt(n,[t.feBu,t.ktrackerApi,i]);if(s<=r)e(t);else{var c="1 分钟内调用 ".concat(t.ktrackerApi," 上报 ").concat(o,": ").concat(i," 到 ").concat(t.feBu," 节点的次数 ").concat(s," 次, 超过阈值 ").concat(r,", 已忽略上报到此前端节点的 ").concat(t.ktrackerApi," 函数调用(1 分钟后重新生效)");dn.warn(c),a([t],s,c)}}else e(t)}))}catch(e){console.log("error :>> ",e)}}return o.clear=function(){clearInterval(i)},o}function mo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=xn(d.requestIdleCallback),n=r?d.requestIdleCallback(i,{timeout:3e3}):Ai(i,t);function i(){a(),xn(e)&&e()}function a(){r&&xn(d.cancelIdleCallback)?d.cancelIdleCallback(n):d.clearTimeout(n),n=null}return a}function go(e){var t=xn(d.requestAnimationFrame),r=t?d.requestAnimationFrame(n):Ai(n,1e3/60);function n(t){i(),xn(e)&&e(En(t,ce.Num)?t:pa.currentAbsoluteTime())}function i(){t&&xn(d.cancelAnimationFrame)?d.cancelAnimationFrame(r):d.clearTimeout(r),r=null}return i}function yo(e){return"pageshow"===e.type||"visible"===g.visibilityState}function bo(e){return"pagehide"===e.type||"hidden"===g.visibilityState}function ko(e){var t=e.once,r=e.isPageVisibility,n=e.eventCallback,i=e.onRemoveListener,a=!1;return function(e){if(r(e)){if(a)return void(a=!1);a=!0,t&&i(),n(e)}}}function wo(e,t){var r=ko({once:t,isPageVisibility:yo,eventCallback:e,onRemoveListener:n});function n(){E("visibilitychange",r,!0),w("pageshow",r,!0)}return T("visibilitychange",r,!0),k("pageshow",r,!0),n}function To(e,t){var r=ko({once:t,isPageVisibility:bo,eventCallback:e,onRemoveListener:n});function n(){E("visibilitychange",r,!0),w("pagehide",r,!0)}return T("visibilitychange",r,!0),k("pagehide",r,!0),n}var Eo,So=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.delay,i=r.maxDepth,a=r.autoCloseReport,o=void 0===a||a,s=r.reporter,c=r.uninstaller;u(this,e),this.queueCache=[],this.isRunning=!1,this.retryTaskNum=0,this.discardedTaskNum=0,this.queueCacheTasks=[],this.delay=n||3e4,this.maxDepth=i||45;var l=Wn(),f=l.reportCountLimitPerMinute;this.maxDepth=this.maxDepth,this.reporter=s,this.uninstaller=c,this.debounceTask=ho(this.runReport.bind(this),this.delay),wo((function(){e.isImmediate=!1})),o&&To(this.runReportPromptly.bind(this)),this.intervalRun=d.setInterval((function(){t.runReportPromptly()}),6e4),this.push=vo(this.pushDirect.bind(this),60,f||2700)}return c(e,[{key:"pushDirect",value:function(){var e;return(e=this.queueCache).push.apply(e,arguments),this.size>=this.maxDepth?this.debounceTask.flush():this.debounceTask(),this}},{key:"replace",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.queueCache=t}},{key:"runReportPromptly",value:function(){e.isImmediate=!0,this.debounceTask.cancel(),this.runReport.call(this)}},{key:"teardown",value:function(){xn(this.uninstaller)&&this.uninstaller(!0),this.queueCacheTasks=[],this.queueCache=[],clearInterval(this.intervalRun),this.intervalRun=null,this.push.clear()}},{key:"size",get:function(){return this.queueCache.length}},{key:"list",get:function(){return this.queueCache}},{key:"runReport",value:function(){return h(this,void 0,void 0,n().mark((function t(){var r,i=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.size<=0)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.genReportTask();case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:if(!e.isImmediate){t.next=10;break}return this.runReportTask(r),t.abrupt("return");case 10:mo((function(){return i.runReportTask.call(i,r)}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"genReportTask",value:function(){return h(this,void 0,void 0,n().mark((function t(){var r,i,a,o,u,s,c,f,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.isImmediate,i=this.queueCache.splice(0,r?this.size:this.maxDepth),a=this.reporter(i,{isImmediate:r})){t.next=5;break}return t.abrupt("return");case 5:if(o=a.url,u=a.options,s=a.payload,(c=l({},u)).useGzip=c.useGzip&&i.length>=10,ji(s),(f=Oi(s))&&En(f,ce.Str)){t.next=12;break}return t.abrupt("return");case 12:if(!c.useGzip){t.next=23;break}return t.prev=13,t.next=16,Ei(f);case 16:f=t.sent,c.useGzip=!0,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(13),c.useGzip=!1;case 23:return p=xn(o)?o(c):o,c.debug&&dn.info("sendTrackData [url: "+p+", payload: "+Oi(s)+"]"),t.abrupt("return",{reportUrl:p,plainPayload:f,mergeOptions:c,retryCount:0});case 26:case"end":return t.stop()}}),t,this,[[13,20]])})))}},{key:"runReportTask",value:function(t){return h(this,void 0,void 0,n().mark((function r(){var i,a,o,u,s,c=this;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(this.retryTaskNum+this.discardedTaskNum+this.queueCacheTasks.length>4)){r.next=3;break}return this.teardown(),r.abrupt("return");case 3:if(i=t.reportUrl,a=t.plainPayload,o=t.mergeOptions,u=t.retryCount,!e.isImmediate){r.next=8;break}return Va(i,a,o),this.runQueueEarliestTask(),r.abrupt("return");case 8:if(!(this.isRunning&&u<=0)){r.next=11;break}return this.queueCacheTasks.push(t),r.abrupt("return");case 11:return this.isRunning=!0,r.next=14,Va(i,a,o);case 14:if(s=r.sent,this.isRunning=!1,!s){r.next=20;break}return u>0&&(this.retryTaskNum-=1),this.runQueueEarliestTask(),r.abrupt("return");case 20:if(u<=0&&(this.retryTaskNum+=1),t.retryCount+=1,!(t.retryCount>3)){r.next=26;break}return this.discardedTaskNum+=1,this.retryTaskNum-=1,r.abrupt("return");case 26:Ai((function(){return c.runReportTask(t)}),1e3*t.retryCount);case 27:case"end":return r.stop()}}),r,this)})))}},{key:"runQueueEarliestTask",value:function(){if(An(this.queueCacheTasks))if(e.isImmediate)for(var t=null;t=this.queueCacheTasks.shift();)this.runReportTask(t);else{var r=this.queueCacheTasks.shift();this.runReportTask(r)}}}],[{key:"genErrorQueue",value:function(t){return this.errorQueue=this.errorQueue||new e(t)}},{key:"genTimingQueue",value:function(t){return this.timingQueue=this.timingQueue||new e(t)}},{key:"genBehaviorQueue",value:function(t){return this.behaviorQueue=this.behaviorQueue||new e(t)}},{key:"genActionstatQueue",value:function(t){return this.actionstatQueue=this.actionstatQueue||new e(t)}},{key:"genActiontrackQueue",value:function(t){return this.actiontrackQueue=this.actiontrackQueue||new e(t)}}]),e}();function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e.length<=0)){var r=pa.curOptions;return{url:r.traceApiUrl,options:Ii(t),payload:l({resource:e},pa.genMetadata(),{url:Jn("href")})}}}So.isImmediate=!1,function(e){e.Err="isErrMounted",e.Perf="isPerfMounted",e.Trace="isTraceMounted",e.Ktr="isKtrMounted"}(Eo||(Eo={}));var Ao=function(){return b&&(b.getEntriesByType&&b.getEntriesByType("navigation")[0]||function(){var e=b.timing,t=b.navigation.type,r={type:2===t?"back_forward":1===t?"reload":"navigate",entryType:"navigation",initiatorType:"navigation",startTime:0,workerStart:0,redirectCount:b.navigation.redirectCount,name:Jn("href"),nextHopProtocol:Jn("protocol"),duration:Math.max(e.loadEventEnd-e.navigationStart,0)};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(r[n]=Math.max(e[n]-e.navigationStart,0));return r}())},xo=["click","dblclick","keypress"],Io=["popstate","hashchange"],Mo=["pushState","replaceState"],Co=["CANVAS"];function Oo(e){if(pa.getState(Eo.Trace)){Pi(e);var t=Fa({pn:e.feBu});So.behaviorQueue.pushDirect(l({},e,{feBu:t.pn,resourceId:t.ps,serviceWithStage:t.pv,levelId:d.g_levelId,_uniqueId:Gi()}))}}var Ro={popstate:jo("popstate"),hashchange:jo("hashchange")},Po={},Fo="",Lo="";function jo(e){return function(t){var r,n,i,a=pa.getMetadata(),o=a.timeOrigin,u=a.refer,s=Fo||u,c=Lo||ya(u).origin||u,l=null!==(r=null==t?void 0:t.toUrl)&&void 0!==r?r:String(Jn("href")),f=null!==(n=null==t?void 0:t.toTitle)&&void 0!==n?n:String(Xn("title"));Fo=l,Lo=f,Oo({feBu:pa.pagePubMeta.pn,type:ne.Rou,subType:e,eventType:null!==(i=null==t?void 0:t.eventType)&&void 0!==i?i:e,timestamp:Fo?pa.currentFixTime():o,from:s,fromTitle:c,to:l,toTitle:f}),pa.emitter.emit(Ne.AppRoute)}}function No(e){var t=e.target,r=t.tagName,n=e.type;r&&n&&!In(Co,r)&&Oo({feBu:pa.pagePubMeta.pn,type:ne.Beh,subType:n,eventType:n,tagName:r,title:null==t?void 0:t.title,tagValue:null==t?void 0:t.value,tagPath:ii(t),outerHTML:mi(t),width:t.offsetWidth,height:t.offsetHeight,timestamp:pa.currentFixTime(e.timeStamp)})}function zo(){if(vi(pa.curOptions.initTraceCollector)){if(pa.getState(Eo.Trace))return dn.info(ur);So.genBehaviorQueue({maxDepth:100,reporter:_o,uninstaller:Do}),na((function(){var e;xo.forEach((function(e){return T(e,No,!1)})),e=Ao(),jo("initPage")({eventType:e&&e.type||"navigate"}),Mo.forEach((function(e){xn(Po[e])||(Po[e]=mn(d.history,e,(function(t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(d.history,n);var a=n.length>2?n[2]:void 0,o=n.length>1?n[1]:String(Xn("title"));a&&jo(e)({toUrl:String(a),toTitle:o?String(o):""})}})))})),Io.forEach((function(e){return k(e,Ro[e],!1)}))})),pa.setState(Eo.Trace,!0),dn.success(ur)}}function Do(e){pa.getState(Eo.Trace)&&(xo.forEach((function(e){return E(e,No,!1)})),Mo.forEach((function(e){var t=Po[e];xn(t)&&(t(),Po[e]=void 0)})),Io.forEach((function(e){return w(e,Ro[e],!1)})),!e&&So.behaviorQueue.teardown(),pa.setState(Eo.Trace,!1),dn.success("trace collector unloaded!"))}function Bo(e,t){if(!(e.length<=0))return{url:pa.curOptions.newErrorUrl,options:Ci(t),payload:l({resource:e},pa.genMetadata(),{url:Jn("href")})}}function qo(e){Pi(e);var t=e.error,r=e.labels,n=p(e,["error","labels"]),i=t.labels,a=p(t,["labels"]),o=l(function(e){var t={};try{var r=e.config,n=e.request,i=e.response,a=l({},r,n);if(Sn(a)){var o=a.api||a.url;if(o){var u=ya(o);l(t,{subType:le,method:a.method,reqUrl:u.href,reqOrigin:u.origin,reqPath:u.pathname})}}if(i){var s=i.statusCode,c=i.data,f=i.headers,p=i.hunterId,h=i.bizcode,v=i.bizMsg,m=i.bizErrCode,g=i.bizErrMsg||gi(null==f?void 0:f[Pe]);l(t,{resStatus:In(x,s)?i.status:s,bizcode:h||(null==c?void 0:c[Le]),bizMsg:v||(null==c?void 0:c[je]),bizErrCode:m||(null==f?void 0:f[Re]),bizErrMsg:g?g.slice(0,100):void 0,hunterId:p||(null==f?void 0:f[Ie]),requestId:null==f?void 0:f[Fe]})}}catch(e){}return Sn(t)?l({subType:fe,designId:d.g_designId,levelId:d.g_levelId},t):t}(t),r,i,Mn(a,(function(e){return In(["object","function"],f(e))}))),u=ja(t,{isParseStack:!0}),s=u.parsedStack,c=u.pubAppInfo,h=o.feBu||o.pubAppName||c.pn,v="".concat(s.line).concat(s.column);["reqUrl","method","resStatus"].forEach((function(e){var t=o[e];!In(x,t)&&(v+=t)}));var m=Xi(s.message,v+h),g=In([sa.error,sa.legacyError],n.subType),y=!Ra(m),b=o.level||n.level||"error",k=In(["trace"],b);if(!(y&&!g&&!k)){var w=Xi(s.message,v),T=Fa({pn:h},c),E=l({issueKey:w},n,s,{level:b,labels:Cn(Mn(o,["stack","reqParams","reqData"])),feBu:h,resourceId:T.ps,serviceWithStage:T.pv,levelId:d.g_levelId,isCustom:yn(t,"name"),_uniqueId:Gi()});return pa.emitExclude(Ne.ExErr,E)?void 0:E}}function Uo(e){var t=e.subType,r=e.error,n=e.defaultMsg,i=e.single,a=p(e,["subType","error","defaultMsg","single"]);if(pa.getState(Eo.Err)&&Oa(r)&&!(null==r?void 0:r[O])){!function(e){Rn(e,O,!0)}(r);var o=r.message;if(!En(o,ce.Str)||!In(o,ce.InvErr)){Rn(r,"message",o||n);var u=qo(l(a,{type:ne.Err,subType:t,url:Jn("href"),timestamp:pa.currentFixTime(),error:r}));if(u)if(i){var s=Bo([u],{single:!0});if(!s)return;var c=s.url,f=s.options,h=s.payload,v=l({},f),d=xn(c)?c(v):c;ji(h),Va(d,Oi(h),v)}else So.errorQueue.push(u)}}else(null==r?void 0:r[O])&&dn.warn("请勿重复上报同一 Error 对象, 比如 console.error(e) 后调用 sendErrorV2({ error: e })")}function Ho(e){if(!Oa(e))return dn.warn("'sendError' Expected error!");Go(sa.legacyError)({error:e})}function Ko(e){Go(sa.error)(e)}function Go(e){return function(t){(Array.isArray(t)?t:[t]).reduce((function(e,t){return t&&t.error&&(Array.isArray(t.error)&&t.error.forEach((function(r){Oa(r)&&e.push(l({},t,{error:r}))})),Oa(t.error)&&e.push(t)),e}),[]).forEach((function(t){var r;Uo({subType:e,ktrackerApi:e===sa.error?"sendErrorV2":"sendError",error:t.error,labels:t.labels,level:t.level,single:null===(r=null==t?void 0:t.options)||void 0===r?void 0:r.single})}))}}function Qo(e,t){if(pa.getState(Eo.Perf)){var r=Jn("href"),n={feBu:t.feBu||pa.pagePubMeta.pn,type:ne.Mea,subType:e,name:t.name||e,timestamp:pa.currentFixTime(),startTime:t.startTime,duration:t.duration,endTime:t.duration,url:r,urlHost:ya(r).hostname},i=t.element||t.target;switch(i&&(n.path=ii(i),n.outerHTML=mi(i)),e){case ge:case ye:case be:n.startTime=0;break;case ke:case we:case Ee:n.endTime=n.startTime+n.duration;break;case Te:n.endTime=n.startTime;break;case Se:break;case _e:if(!i)return;n.startTime=0,n.duration=t.startTime,n.endTime=n.startTime+n.duration,n.name=t.identifier;break;case Ae:n.tbt=t.tbt,n.endTime=n.startTime+n.duration,l(n,t.markMetrics)}return $o(n),n}}function $o(e){Pi(e);var t=e.feBu?Fa({pn:e.feBu}):La().pubAppInfo;So.timingQueue.pushDirect(l({},e,{feBu:t.pn,resourceId:t.ps,serviceWithStage:t.pv,levelId:d.g_levelId,_uniqueId:Gi()}))}var Vo,Wo,Jo=function(){function e(){u(this,e),this.cacheCount=0,this.loadedResourceCache={}}return c(e,[{key:"countAccumulator",value:function(){this.cacheCount+=1}},{key:"countSubtracter",value:function(){this.cacheCount-=1}},{key:"countTouchBound",value:function(){return this.cacheCount>=50}},{key:"countReseter",value:function(){this.cacheCount=0}},{key:"push",value:function(e,t){if(e&&t&&!this.countTouchBound())if(Da()){var r=this.loadedResourceCache[e]||[];if(!An(r))return this.loadedResourceCache[e]=[t],void this.countAccumulator();for(var n=0,i=r.length;n<i;n++){if(r[n].timestamp>t.timestamp){r.splice(n,0,t),this.countAccumulator();break}if(n===i-1){r.push(t),this.countAccumulator();break}}this.loadedResourceCache[e]=r}else $o(t)}},{key:"consume",value:function(e,t){if(!this.has(e))return null;var r=this.loadedResourceCache[e];if(!t){var n=r.shift();return this.countSubtracter(),this.removeKeyIfPossible(e),n}var i=r.findIndex((function(e){return e.timestamp===t}));if(i>-1){var a=r.splice(i,1).shift();return this.countSubtracter(),this.removeKeyIfPossible(e),a}var o=r.shift();return this.countSubtracter(),this.removeKeyIfPossible(e),o}},{key:"has",value:function(e){return An(this.loadedResourceCache[e])}},{key:"pourout",value:function(){var e=[];for(var r in this.loadedResourceCache)e.push.apply(e,t(this.loadedResourceCache[r]));return this.loadedResourceCache={},this.countReseter(),e}},{key:"removeKeyIfPossible",value:function(e){this.has(e)||delete this.loadedResourceCache[e]}}]),e}(),Xo=new Jo;var Yo;var Zo;function eu(){var e=pa.curOptions;if(vi(e.initException)){if(pa.getState(Eo.Err))return dn.info(ar);So.genErrorQueue({reporter:Bo,uninstaller:tu}),e.getUnhandledrejection&&(xn(Zo)||k(ve,Zo=function(e){Uo({subType:ve,error:e.reason,defaultMsg:"unhandled rejection"})})),xn(Vo)||k("error",Vo=function(e){var t=e.target;if(t instanceof HTMLElement&&yi(t)&&In(L,t.nodeName)){var r=Jn("href"),n=function(e){return(null==e?void 0:e.src)||(null==e?void 0:e.href)||""}(t);if(!n||!n.trim()||n===r)return;var i=ya(n.trim()),a=i.href;if(!ba(a)||ma(a)||n===r)return;var o={feBu:Fa(va(a)).pn,tagName:t.tagName,outerHTML:mi(t),path:ii(t)};pa.getState(Eo.Perf)&&Xo.push(n,l({type:ne.Res,subType:da(n),name:n,outerHTML:mi(t),path:ii(t),url:Jn("href"),timestamp:pa.currentFixTime(e.timeStamp),isSuccess:!1,isLoadend:!0,_uniqueId:Gi()},o));var u=new Error("Resource load error: ".concat(n));u.name="ResourceLoadError",u.stack="",u.labels=l({level:me,reqUrl:i.href,reqOrigin:i.origin,reqPath:i.pathname},o),Uo({subType:me,error:u})}},!0),xn(Wo)||(Wo=mn(m,"error",(function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(m,r);for(var i=0,a=r.length;i<a;i++){var o=r[i];try{Uo({subType:pe,error:o})}catch(o){e.call(m,o)}}}}))),xn(Yo)||k("error",Yo=function(e){var t=e.message,r=e.error;Uo({subType:he,error:r,defaultMsg:t||"global error"})},!1),pa.setState(Eo.Err,!0),dn.success(ar)}}function tu(e){pa.getState(Eo.Err)&&(pa.setState(Eo.Err,!1),xn(Wo)&&(Wo(),Wo=null),xn(Vo)&&(w("error",Vo,!0),Vo=null),xn(Yo)&&(w("error",Yo,!1),Yo=null),xn(Zo)&&(w(ve,Zo),Zo=null),!e&&So.errorQueue.teardown(),dn.success("exception collector unloaded!"))}function ru(e,t,r){if(!xn(e))return e;try{var n=e[R];if(n)return n;if(e[P])return e}catch(t){return e}var i=function(){var n=Array.prototype.slice.call(arguments);try{r&&xn(r)&&r.apply(this,arguments);var i=n.map((function(e){return ru(e,t)}));return e.apply(this,i)}catch(e){throw Uo(l({subType:de,error:e},t)),e}};try{for(var a in e)yn(e,a)&&(i[a]=e[a])}catch(e){}On(i,e),Rn(e,R,i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:function(){return e.name}})}catch(e){}return i}var nu,iu={},au={target:g.documentElement,options:{childList:!0,subtree:!0}};function ou(e,t,r){if(Na()){var n=l({},au,r);try{var i=new MutationObserver((function(e){e&&e.forEach&&xn(t)&&t(e)}));i.observe(n.target,n.options),iu[e]=i}catch(e){dn.warn(e)}}}function uu(e){var t=iu[e];t instanceof MutationObserver&&(t.disconnect(),delete iu[e])}function su(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"Request"in d&&bn(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return En(e[0],ce.Str)?e[0]:"Request"in d&&bn(e[0],Request)?e[0].url:String(e[0])}function lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"Request"in d&&bn(e[0],Request)?e[0].body:e[1]?e[1].body:""}var fu,pu,hu,vu,du,mu=function(){var e=Ao();return e&&e.activationStart||0},gu=1,yu=!1;function bu(e){var t=e.textContent;return t&&t.trim()}function ku(e){var t=e&&e.tagName;return t&&!/^(?:HEAD|META|LINK|STYLE|SCRIPT|BR)$/.test(t)}function wu(e){return e&&1===e.nodeType&&bu(e)&&ku(e.parentElement)}function Tu(e){fu={fmp:hu?hu.t:e,mtti:e}}function Eu(e){var t=0;if(e!==g.body){if(!(e.offsetWidth>0&&e.offsetHeight>0))return t;if("IMG"!==e.tagName){if(bu(e)||"none"!==getComputedStyle(e).backgroundImage){t=1;var r=e.childNodes;r&&r.length&&(t+=Au(r))}}else e.src&&(t=1)}return t}function Su(e){if(!(e<=0)){var t=pa.currentAbsoluteTime(),r={t:t,s:e,m:0,p:pu};pu=r;for(var n=r;r=r.p;)t-r.t>50?delete r.p:(e+=r.s,r.s>n.s&&(n=r));e>=(hu?hu.m:0)&&(n.m=e,hu!==n&&(hu=n,ki(xe)?Iu():du=Iu))}}function _u(){Su(Eu(this)),this.removeEventListener("load",_u)}function Au(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];"IMG"===i.tagName?i.addEventListener("load",_u):ku(i)?t+=Eu(i):wu(i)&&(t+=1)}return t}function xu(){vu&&(clearTimeout(vu),vu=null)}function Iu(){var e,t,r,n,i;xu(),function a(){yu||(r=pa.currentAbsoluteTime(),e||(e=t=r),vu=setTimeout((function(){n=pa.currentAbsoluteTime(),(i=n-r)-gu<10?gu<16?gu*=2:gu<25?gu+=1:gu=25:i>50&&(gu=Math.max(1,gu/2)),n-r>50&&(t=n),xu(),n-t>1e3||n>2e4?Tu(t):a()}),gu))}()}function Mu(e){if(g.body){var t=0;e.forEach((function(e){t+=Au(e.addedNodes)})),Su(t)}}function Cu(){if(!yu){for(var e in yu=!0,fu&&gn(fu.mtti)||Tu(pa.currentAbsoluteTime()),uu(Ke),fu)if(yn(fu,e)){var t=e,r=fu[t];zn[t]=r,Qo(e,{startTime:mu(),duration:r})}fu=null}}var Ou=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(l({type:e,buffered:!0},r||{})),n}}catch(e){}},Ru={};function Pu(e){var t=e.isSuccess,r=e.isLoadend,n=Si(r,!1!==r);return{isSuccess:Si(t,!1!==n),isLoadend:n}}function Fu(e){var t={};if(yn(e,"toJSON")&&xn(e.toJSON)&&(t=e.toJSON()),!Sn(t))for(var r in e)In(["toJSON"],r)||(t[r]=e[r]);return t}function Lu(e){var t=e.entries,r=e.name,n=e.value,i=Fi(t);if(i){var a=r.toLocaleLowerCase();return zn[a]=n,!Ru[4]&&In([ye,be],a)&&(Ru[4]=Ou("longtask",(function(e){e.forEach((function(e){if("self"===e.name){var t=e.startTime,r=e.duration-50;if(r>0)for(var n in!zn.isRtTbt&&zn.fcp<=t&&(zn.tbt=(zn.tbt||0)+r),Nn)if(yn(Nn,n)){var i=Nn[n];i&&i.autoMeasureTBT&&i.markTime<=t&&(i.tbt=(i.tbt||0)+r)}}}))}))),In([we],a)&&Ai((function(){Ru[4]&&(zn.isRtTbt=!0,Qo(Se,{startTime:0,duration:zn.tbt,endTime:pa.currentAbsoluteTime()}))}),1e4),Qo(a,l(Fu(i),{duration:n}))}}var ju=!1;function Nu(e,t){var r=[];return t.forEach((function(t){var n=t.name,i=e===ne.Nav;if(n&&ba(n)&&(i||!ma(n))){if(i){if(ju)return;ju=!0}var a=Fu(t);a.type=e,a.name=n;var o=a.startTime;if(a.startTime=gn(o)?o:0,a.timestamp=pa.currentFixTime(),function(e){var t=e.type,r=e.startTime,n=e.fetchStart,i=e.redirectStart,a=e.redirectEnd,o=e.domainLookupStart,u=e.domainLookupEnd,s=e.connectStart,c=e.secureConnectionStart,l=e.connectEnd,f=e.requestStart,p=e.responseStart,h=e.responseEnd,v=e.workerStart,d=e.transferSize=e.transferSize||0,m=e.encodedBodySize=e.encodedBodySize||0,g=e.decodedBodySize=e.decodedBodySize||0,y=Ui(u,o),b=Ui(l,s);e.redirectMs=Ui(a,i),e.appCacheMs=Ui(o,n),e.dnsMs=y,e.tcpMs=b,e.sslMs=Ui(l,c,!0),e.ttfb=Ui(p,t===ne.Nav?mu():r),e.workerMs=Ui(h,v,!0),e.networkMs=Ui(h,f),e.downloadMs=Ui(h,p),e.fetchMs=Ui(h,n),e.stalledMs=Math.max(0,Bi(f-n-y-b)),e.headerSize=Ui(d,m),e.resBodySize=m>Q?g:m,e.resourceSize=g}(a),e===ne.Res&&function(e){var t=e.initiatorType,r=e.responseEnd,n=e.transferSize,i=e.name,a=va(i),o=a.pn,u=a.ps;o&&u&&(Dn[o]=l({},Dn[o],a),e.namePattern=function(e){if(!e||!En(e,ce.Str))return"";var t=ya(e).pathname;try{var r=H.exec(t);if(An(r)){var n=r[3];if(n)return t.replace(n,n.replace(/\..+\./,"."))}}catch(e){}return t}(i));var s=Fa(a);if(e.feBu=s.pn,e.resourceId=s.ps,e.serviceWithStage=s.pv,Xo.has(i)){var c=Xo.consume(i);c&&l(e,c,Pu(c),{type:c.type||e.type,name:c.api||e.name,resBodySize:c.resBodySize||e.resBodySize})}l(e,Pu(e));var f=da(i);e.isSuccess&&f&&(l(e,function(e){var t=e.transferSize,r=e.encodedBodySize,n=0===t,i=t>0&&(0===r||t<r);return{isLocalCache:n,isValidateCache:i,isCache:n||i}}(e)),e.isCache&&(e.headerSize=n));e.subType=e.subType||f||t||"other",e.endTime=e.endTime||(e.isLoadend?r:pa.currentAbsoluteTime())}(a),i&&function(e){var t=e.type,r=e.unloadEventStart,n=e.unloadEventEnd,i=e.fetchStart,a=e.responseEnd,o=e.domLoading,u=e.domInteractive,s=e.domComplete,c=e.domContentLoadedEventEnd,f=e.loadEventStart,p=e.loadEventEnd;e.unload=Ui(n,r),e.tti=Ui(c,i),e.parseMs=Ui(c,a);var h=o||u;e.processing=Ui(s,h),e.ready=Ui(c,i),e.resLoadMs=Ui(f,c),e.loadMs=Ui(p,f),e.load=Ui(p,i),e.ttsr=Ui(s,i);var v=pa.pagePubMeta,d=v.pn,m=v.ps,g=v.pv;e.feBu=d,e.resourceId=m,e.serviceWithStage=g,e.subType=t,e.isLoadend=!!(f&&p&&e.loadMs),l(e,Pu(e)),e.isFP=ki(ge),e.isFCP=ki(ye),e.isLCP=ki(be),e.isReady=ki(xe),e.endTime=e.isLoadend?p:pa.currentAbsoluteTime()}(a),!1!==a.isSuccess||Ra(n)){var u,s,c=ya(a.name);a.name=c.href,a.nameHost=c.origin,a.namePattern||(a.namePattern=c.pathname),a.url=Jn("href"),a.urlHost=Jn("hostname"),a.duration=a.duration||Ui(a.endTime,a.startTime),a.st=(u=a.serverTiming,s={},An(u)&&u.forEach((function(e){var t=e.name,r=e.description,n=e.duration;t?s[t]=r||Bi(n):r&&(s[r]=Bi(n))})),s),r.push(Mn(a,["workerTiming","serverTiming","api"]))}}})),r}function zu(){var e=Ao();e&&Nu(ne.Nav,[e]).forEach($o)}function Du(e){e.forEach((function(e){if(e&&e.addedNodes)for(var t=e.addedNodes,r=0,n=t.length;r<n;r++){var i=t[r];yi(i)&&ea(i)}}))}var Bu,qu,Uu,Hu,Ku,Gu,Qu=function(e,t,r){var n,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(n||0))||void 0===n)&&(n=t.value,t.delta=i,e(t))}},$u=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Vu=function(e,t){var r=Ao(),n="navigate";return ca>=0?n="back-forward-cache":r&&(n=g.prerendering||mu()>0?"prerender":g.wasDiscarded?"restore":r.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:Gi(),navigationType:n}},Wu=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},Ju=-1,Xu=function(){return"hidden"!==g.visibilityState||g.prerendering?1/0:0},Yu=function(e){"hidden"===g.visibilityState&&Ju>-1&&(Ju="visibilitychange"===e.type?e.timeStamp:0,es())},Zu=function(){k("visibilitychange",Yu,!0),k("prerenderingchange",Yu,!0)},es=function(){w("visibilitychange",Yu,!0),w("prerenderingchange",Yu,!0)},ts=function(){return Ju<0&&(Ju=Xu(),Zu(),la((function(){Ai((function(){Ju=Xu(),Zu()}),0)}))),{get firstHiddenTime(){return Ju}}},rs=function(e){g.prerendering?k("prerenderingchange",(function(){return e()}),!0):e()},ns=function(e,t){t=t||{},rs((function(){var r,n=ts(),i=Vu("FCP"),a=Ou("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-mu(),0),i.entries.push(e),r(!0)))}))}));a&&(r=Qu(e,i,t.reportAllChanges),la((function(n){i=Vu("FCP"),r=Qu(e,i,t.reportAllChanges),$u((function(){i.value=b.now()-n.timeStamp,r(!0)}))})))}))},is={passive:!0,capture:!0},as=new Date,os=function(e,t){Bu||(Bu=t,qu=e,Uu=new Date,cs(w),us())},us=function(){if(qu>=0&&qu<Uu-as){var e={entryType:"first-input",name:Bu.type,target:Bu.target,cancelable:Bu.cancelable,startTime:Bu.timeStamp,processingStart:Bu.timeStamp+qu};Hu.forEach((function(t){t(e)})),Hu=[]}},ss=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"===e.type?function(e,t){var r=function(){os(e,t),i()},n=function(){i()},i=function(){w("pointerup",r,is),w("pointercancel",n,is)};k("pointerup",r,is),k("pointercancel",n,is)}(t,e):os(t,e)}},cs=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ss,is)}))},ls=function(e,t){t=t||{},rs((function(){var r,n=ts(),i=Vu("FID"),a=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},o=function(e){e.forEach(a)},u=Ou("first-input",o);r=Qu(e,i,t.reportAllChanges),u&&To((function(){o(u.takeRecords()),u.disconnect()}),!0),u&&la((function(){var n;i=Vu("FID"),r=Qu(e,i,t.reportAllChanges),Hu=[],qu=-1,Bu=null,cs(k),n=a,Hu.push(n),us()}))}))},fs=0,ps=1/0,hs=0,vs=function(e){e.forEach((function(e){e.interactionId&&(ps=Math.min(ps,e.interactionId),hs=Math.max(hs,e.interactionId),fs=hs?(hs-ps)/7+1:0)}))},ds=function(){return Ku?fs:b.interactionCount||0},ms=function(){"interactionCount"in b||Ku||(Ku=Ou("event",vs,{type:"event",buffered:!0,durationThreshold:0}))},gs=0,ys=function(){return ds()-gs},bs=[],ks={},ws=function(e){var t=bs[bs.length-1],r=ks[e.interactionId];if(r||bs.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};ks[n.id]=n,bs.push(n)}bs.sort((function(e,t){return t.latency-e.latency})),bs.splice(10).forEach((function(e){delete ks[e.id]}))}},Ts=function(e,t){t=t||{},rs((function(){ms();var r,n=Vu("INP"),i=function(e){e.forEach((function(e){(e.interactionId&&ws(e),"first-input"===e.entryType)&&(!bs.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&ws(e))}));var t,i=(t=Math.min(bs.length-1,Math.floor(ys()/50)),bs[t]);i&&i.latency!==n.value&&(n.value=i.latency,n.entries=i.entries,r())},a=Ou("event",i,{durationThreshold:t.durationThreshold||40});r=Qu(e,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),To((function(){i(a.takeRecords()),n.value<0&&ys()>0&&(n.value=0,n.entries=[]),r(!0)})),la((function(){bs=[],gs=ds(),n=Vu("INP"),r=Qu(e,n,t.reportAllChanges)})))}))},Es={};function Ss(){var e,t;e=Lu,t=t||{},rs((function(){var r,n=ts(),i=Vu("FP"),a=Ou("paint",(function(e){e.forEach((function(e){"first-paint"===e.name&&(a.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-mu(),0),i.entries.push(e),r(!0)))}))}));a&&(r=Qu(e,i,t.reportAllChanges),la((function(n){i=Vu("FP"),r=Qu(e,i,t.reportAllChanges),$u((function(){i.value=b.now()-n.timeStamp,r(!0)}))})))})),ns(Lu),function(e,t){t=t||{},rs((function(){var r,n=ts(),i=Vu("LCP"),a=function(e){var t=e[e.length-1];if(t){var a=Math.max(t.startTime-mu(),0);a<n.firstHiddenTime&&(i.value=a,i.entries=[t],r())}},o=Ou("largest-contentful-paint",a);if(o){r=Qu(e,i,t.reportAllChanges);var u=Wu((function(){Es[i.id]||(a(o.takeRecords()),o.disconnect(),Es[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){k(e,u,{once:!0,capture:!0})})),To(u,!0),la((function(n){i=Vu("LCP"),r=Qu(e,i,t.reportAllChanges),$u((function(){i.value=performance.now()-n.timeStamp,Es[i.id]=!0,r(!0)}))}))}}))}(Lu,{reportAllChanges:!0}),ls(Lu),Ts(Lu),function(e,t){t=t||{},ns(Wu((function(){var r,n=Vu("CLS",0),i=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],o=a[a.length-1];i&&e.startTime-o.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e]),i>n.value&&(n.value=i,n.entries=a,r())}}))},u=Ou("layout-shift",o);u&&(r=Qu(e,n,t.reportAllChanges),To((function(){o(u.takeRecords()),r(!0)})),la((function(){i=0,n=Vu("CLS",0),r=Qu(e,n,t.reportAllChanges),$u((function(){return r()})),setTimeout(r,0)})))})))}(Lu)}var _s,As,xs=0;function Is(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Gu&&(clearTimeout(Gu),Gu=null);var t=b.getEntriesByType(ne.Res);if(t.length>xs){var r=t.slice(xs);xs+=r.length;var n=Nu(ne.Res,r);n.forEach($o)}e&&(Gu=Ai(Is,500))}function Ms(){za()&&(Ss(),Ou("element",(function(e){e.forEach((function(e){e.identifier&&Qo(_e,e)}))})),aa((function(){ki("load")||zu()})),To((function(){!function(){if(!vi(pa.curOptions.getResourcePerformance))return;if(Ru[5]){if(xn(Ru[5].takeRecords)){var e=Ru[5].takeRecords();Nu(ne.Res,e).forEach($o)}return}Is(!1)}(),function(){var e,r=So.timingQueue.list.slice();r.push.apply(r,t(Xo.pourout()));var n=r.map((function(e){if(e.name)return e;var t=ya(e.api||e.name);return l(l({},e),{name:t.href,nameHost:t.origin,namePattern:t.pathname,url:Jn("href"),urlHost:Jn("hostname")})}));if(n.length<=0)return;(e=So.timingQueue).replace.apply(e,t(n)),So.timingQueue.runReportPromptly()}()})))}function Cs(){ta(g);var e=[];for(var t in Dn){var r=Dn[t];if(t&&!r.pr){var n=Fa(r),i=n.pn,a=n.pv;e.push({pn:i,pv:a}),r.pr=!0}}return e}function Os(e,t){var r=Cs();if(e.length||r.length)return{url:pa.curOptions.perfApiUrl,options:Ii(t),payload:l({resource:e,subApps:r},pa.genMetadata())}}function Rs(){if(pa.getState(Eo.Perf))return dn.info(or);var e=pa.curOptions,t=e.initPagePerformance,r=e.getAjaxPerformance,n=e.getFetchPerformance;if(vi(t)){if(!pa.getState("isVisitSample"))return dn.info("[Performance Sample]:","The current visit is not in the sampling range!");So.genTimingQueue({maxDepth:100,autoCloseReport:!1,reporter:Os,uninstaller:Ps}),Na()&&ou(Ge,Du),Na()&&(ou(Ke,Mu),na((function(){fu&&gn(fu.mtti)||!xn(du)||(du(),du=null),Ai(Cu,2e4)})),ia((function(){return mo(Cu)}))),vi(pa.curOptions.getResourcePerformance)&&(za()?Ru[5]=Ou("resource",(function(e){mo((function(){Nu(ne.Res,e).forEach($o)}))})):(b.onresourcetimingbufferfull=function(){Is(),dn.warn("WARNING: Resource Timing Buffer is FULL!"),b.clearResourceTimings(),xs=0},Gu=Ai(Is,500))),Ms(),vi(r)&&(xn(_s)||(_s=mn(S.prototype,"open",(function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.url=r[1];var i=ya(this.url);return this.api=i.href,ma(this.api)||(this.method=String(r[0]||"GET").toUpperCase(),this.async=Si(r[2],!0),this.type=ne.Http,this._uniqueId=Gi(),this.unProxyAbort=mn(this,"abort",(function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(this,r),this.isManualAbort=!0,xn(this.unProxyAbort)&&(this.unProxyAbort(),this.unProxyAbort=null)}}))),e.apply(this,r)}}))),xn(As)||(As=mn(S.prototype,"send",(function(e){return function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(ma(this.api))return e.apply(this,n);var a=va(this.api),o=a.pn?Fa(a):La().pubAppInfo,u={type:this.type,subType:"xhr",method:this.method,api:this.api,async:this.async,startTime:pa.currentAbsoluteTime(),timestamp:pa.currentFixTime(),isSuccess:!1,isLoadend:!1,isAborted:!1,isManualAbort:!1,isTimeout:!1,timeout:this.timeout,reqBodySize:Ti(n[0]),_uniqueId:this._uniqueId,feBu:o.pn,resourceId:o.ps,serviceWithStage:o.pv},s=pa.getState("isVisitSample");s&&Xo.push(this.api,u),pa.curOptions.initTraceCollector&&Oo(l({eventType:"request"},u));var c=function e(){t.isAborted=!0,t.removeEventListener("abort",e,!0)};this.addEventListener("abort",c,!0);var f=function e(){t.isTimeout=!0,t.removeEventListener("timeout",e,!0)};this.addEventListener("timeout",f,!0);var p=function e(){t.isError=!0,t.removeEventListener("error",e,!0)};this.addEventListener("error",p,!0);var h=function e(r){if(u.endTime=pa.currentAbsoluteTime(),u.isAborted=Si(t.isAborted,!1),u.isManualAbort=Si(t.isManualAbort,!1),s&&u.isAborted&&!oi())Xo.consume(t.api,u.timestamp);else{u.duration=Ui(u.endTime,u.startTime),u.statusCode=t.status,u.statusText=t.statusText,u.readyState=t.readyState,u.isTimeout=Si(t.isTimeout,!1),u.isError=Si(t.isError,!1);var n=u.isAborted||u.isManualAbort;u.isLoadend=!n,u.isSuccess=!u.isError&&!u.isTimeout&&!n&&bi(u.statusCode);var i=ti(t.getAllResponseHeaders());u.hunterId=i[Ie],u.requestId=i[Fe];try{u.resBodySize=r.total||qi(i[Ce],Ti(t.responseText)),l(u,ni(t.responseText,i))}catch(e){}s&&pa.emitExclude(u.isSuccess?Ne.ExApi:Ne.ExApiErr,u)&&Xo.consume(t.api,u.timestamp),xn(t.unProxyAbort)&&(t.unProxyAbort(),t.unProxyAbort=null),t.removeEventListener("abort",c,!0),t.removeEventListener("timeout",f,!0),t.removeEventListener("error",p,!0),t.removeEventListener("loadend",e,!0)}};return this.addEventListener("loadend",h,!0),e.apply(this,n)}})))),vi(n)&&function(){if(Ua()&&!xn(nu)){var e=pa.getState("isVisitSample");nu=mn(d,"fetch",(function(t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=cu(n),o=ya(a).href;if(ma(o))return t.apply(d,n);var u=va(o),s=u.pn?Fa(u):La().pubAppInfo,c={type:ne.Http,subType:"fetch",method:su(n),api:o,async:!0,startTime:pa.currentAbsoluteTime(),timestamp:pa.currentFixTime(),isSuccess:!1,isLoadend:!1,isAborted:!1,isManualAbort:!1,reqBodySize:Ti(lu(n)),_uniqueId:Gi(),feBu:s.pn,resourceId:s.ps,serviceWithStage:s.pv};return e&&Xo.push(o,c),pa.curOptions.initTraceCollector&&Oo(l({eventType:"request"},c)),t.apply(d,n).then((function(e){var t=e.clone(),r=ri(t),n=r[Ce];return c.hunterId=r[Ie],c.requestId=r[Fe],c.statusCode=t.status,c.isSuccess=Si(t.ok,bi(t.status)),c.isLoadend=!0,t.text().then((function(t){return c.resBodySize=qi(n,Ti(t)),l(c,ni(t,r)),e})).catch((function(){return c.resBodySize=qi(n,0),e}))})).catch((function(t){var r,i;throw c.statusCode=0,c.statusText=t.message,c.isSuccess=!1,c.isAborted="AbortError"===t.name,c.isLoadend=!c.isAborted,"AbortError"===t.name&&(c.isManualAbort=!!(null===(i=null===(r=n[1])||void 0===r?void 0:r.signal)||void 0===i?void 0:i.aborted),e&&c.isAborted&&!oi()&&Xo.consume(o,c.timestamp)),t})).finally((function(){c.endTime=pa.currentAbsoluteTime(),c.duration=Ui(c.endTime,c.startTime),e&&pa.emitExclude((c.isSuccess,Ne.ExApiErr),c)&&Xo.consume(o,c.timestamp)}))}}))}}(),na((function(){zn.ready=pa.currentAbsoluteTime()})),ia((function(){zn.load=pa.currentAbsoluteTime(),mo(zu)})),pa.setState(Eo.Perf,!0),dn.success(or)}}function Ps(e){pa.getState(Eo.Perf)&&(uu(Ge),uu(Ke),yu=!0,xn(_s)&&(_s(),_s=null),xn(As)&&(As(),As=null),xn(nu)&&(nu(),nu=null),Ru[5]&&Ru[5].disconnect(),Gu&&(clearTimeout(Gu),Gu=null),!e&&So.timingQueue.teardown(),pa.setState(Eo.Perf,!1),dn.success("performance collector unloaded!"))}var Fs=function(){function e(){u(this,e),this.running=!1,this.belowFps=20,this.blockFpsTimes=3,this.elapsedMs=0,this.elapsedTime=0,this.lastTime=pa.currentAbsoluteTime(2),this.currentFps=0,this.countFps=0,this.avgFps=60,this.lowestFps=60,this.highestFps=0,this.stableFps=60,this.maxFrameDuration=0,this.minFrameDuration=Number.MAX_SAFE_INTEGER,this.firstFrameDuration=0,this.lastFrameDuration=0,this.jank=0,this.stutter=0,this.start()}return c(e,[{key:"start",value:function(){this.running||(this.running=!0,go(this.tick.bind(this)))}},{key:"stop",value:function(){this.running=!1,this.lastFrameDuration||(this.lastFrameDuration=this.elapsedMs),this.stutter=this.jank/(this.countFps/3)}},{key:"tick",value:function(){var e=pa.currentAbsoluteTime(2);if(this.countFps+=1,this.elapsedMs=e-(this.lastTime||e),this.firstFrameDuration||(this.firstFrameDuration=this.elapsedMs),this.maxFrameDuration=Math.max(this.maxFrameDuration,this.elapsedMs),this.minFrameDuration=Math.min(this.minFrameDuration,this.elapsedMs),this.lastTime=e,this.elapsedTime=this.elapsedMs/1e3,this.elapsedTime){this.currentFps=1/this.elapsedTime,this.currentFps=Math.max(Math.min(this.currentFps,60),0),this.isFpsBlocking(),this.lowestFps=Math.min(this.lowestFps,this.currentFps),this.highestFps=Math.max(this.highestFps,this.currentFps),this.avgFps=(this.countFps*this.avgFps+this.currentFps)/(this.countFps+1);var t=this.countFps%60;0===t&&(this.stableFps=60);var r=t+1;this.stableFps=(r*this.stableFps+this.currentFps)/(r+1)}this.running&&go(this.tick.bind(this))}},{key:"isFpsBlocking",value:function(){this.currentFps>=this.belowFps?this.resetBlockTime():(this.blockFpsTimes-=1,this.blockFpsTimes<=0&&(this.jank+=1,this.resetBlockTime()))}},{key:"resetBlockTime",value:function(){this.blockFpsTimes=3}},{key:"extractMetrics",value:function(){return{countFps:this.countFps,avgFps:this.avgFps,lowestFps:this.lowestFps,highestFps:this.highestFps,stableFps:this.stableFps,maxFrameDuration:this.maxFrameDuration,minFrameDuration:this.minFrameDuration,firstFrameDuration:this.firstFrameDuration,lastFrameDuration:this.lastFrameDuration,jank:this.jank,stutter:this.stutter}}}]),e}();function Ls(){var e=null==b?void 0:b.memory;return{limitHeapSize:(null==e?void 0:e.jsHeapSizeLimit)||0,totalHeapSize:(null==e?void 0:e.totalJSHeapSize)||0,usedHeapSize:(null==e?void 0:e.usedJSHeapSize)||0}}var js,Ns={autoTrack:!1,autoMeasureTBT:!1,autoMeasureFPS:!1};function zs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Da())return dn.warn(sr);if(Nn[e])return dn.warn(cr("mark"));var r=t.pubAppName||t.feBu,n=r?Fa({pn:r}):La().pubAppInfo,i=l({tbt:0,feBu:n.pn,resourceId:n.ps,serviceWithStage:n.pv,markTime:pa.currentAbsoluteTime()},Ns,t);if(Nn[e]=i,i.autoMeasureFPS){var a=new Fs;i.fpsMeasurer=a,a.start()}l(i,Ls()),b.mark("mark_".concat(e,"_start"))}function Ds(e,t){var r;if(!Da())return dn.warn(sr);if(!Nn[e])return dn.warn("There is not a match start mark!");b.mark("mark_".concat(e,"_end"));var n=Nn[e];null===(r=n.fpsMeasurer)||void 0===r||r.stop();var i=function(e){b.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=b.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t:null}(e);if(!i)return qs(e);var a=Ls(),o=n.markTime,u=n.tbt,s=n.totalHeapSize,c=n.usedHeapSize,f=n.feBu,p=n.pubAppName,h=n.autoTrack,v=n.labels,d=n.fpsMeasurer,m=l({},v,t),g=l({tbt:u,elapsedTotalHeapSize:a.totalHeapSize-s,elapsedUsedHeapSize:a.usedHeapSize-c},null==d?void 0:d.extractMetrics());Qo(Ae,l({markMetrics:g,name:e,startTime:o,feBu:f||p,labels:wn(m,{defaultValue:"{}"})},Fu(i))),h&&co({eventType:e,data:l({duration:i.duration},g),labels:m,level:ne.Mea}),qs(e)}function Bs(e,t){Ai((function(){Ds(e,t)}))}function qs(e){var t;null===(t=Nn[e].fpsMeasurer)||void 0===t||t.stop(),delete Nn[e],b.clearMarks&&(b.clearMarks("mark_".concat(e,"_start")),b.clearMarks("mark_".concat(e,"_end")))}function Us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(e,"_tbt");zs(r,t),js&&(clearTimeout(js),js=null),js=Ai((function(){Ds(r)}),2e3)}var Hs=null;function Ks(){return new Promise((function(e){var t=function(){var e=g.createElement("iframe");return e.hidden=!0,g.head.appendChild(e),[function(){return e},function(){e&&(g.head.removeChild(e),e=null)}]}(),r=i(t,2),n=r[0],a=r[1],o=n().contentWindow,u=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection;if(!u)return a(),e("");var s=new u({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}],sdpSemantics:"plan-b"},{optional:[{RtpDataChannels:!0}]});if(!s)return a(),e("");s.createDataChannel("ktr-rtc-channel"),s.createOffer({}).then((function(e){return s.setLocalDescription(e)})).catch((function(e){c()}));var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s&&(s.close(),s=null),Hs&&(d.clearTimeout(Hs),Hs=null),a(),e(t)},l=function(e){var t=V.exec(e);if(An(t)){var r=t[0]||t[1];En(r,ce.Str)&&!r.match($)&&c(r)}},f=function(e){if(e)l(e);else{var t=s&&s.localDescription&&s.localDescription.sdp;if(En(t,ce.Str))t.split("\n").forEach((function(e){0===e.indexOf("a=candidate:")&&l(e)}));c("")}};s.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&f(e.candidate.candidate)},Hs=Ai(f,3e3)}))}var Gs=24*Bi(Ri(3,5))*60*60*1e3;function Qs(){return h(this,void 0,void 0,n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oi()){e.next=2;break}return e.abrupt("return",Promise.resolve(""));case 2:return t="",e.prev=3,e.next=6,Ks();case 6:t=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return e.abrupt("return",Promise.resolve(t||""));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))}function $s(){return new Promise((function(e){$a(pa.curOptions.perfApiUrl,"",{useMethod:"OPTIONS",onXhrLoadend:function(t){return function(e,t){var r=pa.currentTime(),n=ti(e.getAllResponseHeaders()),i=+new Date(n[Oe]);if(gn(i)){var a=r-i;t(Math.abs(a)>=G?-a:0)}}(t,e)}})}))}function Vs(){Vi.removeItem(N)}function Ws(){pa.setState("visitSampleSeed",function(){var e=Vi.getItem(N);if(gn(e))return parseFloat(e);var t=Ri();return Vi.setItem(N,String(t)),t}()),pa.setState("isVisitSample",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=pa.curOptions,n=pa.genMetadata().userId;return!!(r.userWhiteList&&n&&In(r.userWhiteList,n))||!!An(e)&&e[t?"some":"every"]((function(e){return r[He[e]]<=pa.getState("visitSampleSeed")}))}(["visit"])),aa(Vs)}function Js(e){var t=Vn().autoInit;return"auto"!==e||t?pa.getState(Eo.Ktr)?dn.warn("ktracker has been initialzed!"):(Ws(),function(){h(this,void 0,void 0,n().mark((function e(){var t,r,a,o,u,s,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pa.currentTime(),r=$i.getItem(F),a=Sn(r)?r:{},gn(o=a.timestamp)&&gn(a.timeDiff)&&!(t>=o)){e.next=20;break}return e.prev=5,e.next=8,Promise.allSettled([Qs(),$s()]);case 8:u=e.sent,s=i(u,2),c=s[0],l=s[1],"fulfilled"===c.status&&c.value&&(a.clientIp=c.value),"fulfilled"===l.status&&(a.timeDiff=l.value),a.timestamp=t+Gs,$i.setItem(F,a),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:pa.setMetadata("clientIp",a.clientIp),pa.setState("serveTimeDiff",a.timeDiff);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})))}(),vi(pa.curOptions.initBizEvent)&&(So.genActionstatQueue({reporter:io(sa.analyseEvent),uninstaller:function(){co=re}}),So.genActiontrackQueue({reporter:io(sa.event),uninstaller:function(){uo=re,so=re}})),eu(),Rs(),zo(),pa.getState(Eo.Perf)||To((function(){var e=Cs();if(e.length)return Va(pa.curOptions.perfApiUrl,Oi(l({resource:[],subApps:e},pa.getMetadata())),Ii({isImmediate:!0,useGzip:!1}))})),Zs((function(e){return In(ie,e.message)})),pa.setState(Eo.Ktr,!0),void dn.primary("Ktracker mounted!")):dn.warn("You need to start Ktracker manually!")}function Xs(e){if(d.__G_KTRACKER__)return d.__G_KTRACKER__;di(Js)(e)}function Ys(){var e=pa.getState();e[Eo.Ktr]&&(e[Eo.Err]&&tu(),e[Eo.Trace]&&Do(),e[Eo.Perf]&&Ps(),dn.primary("Ktracker unmounted!"),pa.setState(Eo.Ktr,!1))}var Zs=Wa(Ne.ExErr),ec=Wa(Ne.ExApiErr),tc=Wa(Ne.ExApi);var rc=function(){};e.Ktracker=rc,Object.setPrototypeOf(rc,function(){var e=Xs("auto");if(e)return e;var t=Vn(),r=t.initException,n=t.initPagePerformance,i=t.initBizEvent,a={init:di(Xs),initException:di(eu),initPagePerformance:di(Rs),initTraceCollector:di(zo),send:te,sendError:di(Ho,r),sendErrorV2:di(Ko,r),sendEvent:di(uo,i),sendEventV2:di(so,i),sendAnalyseEvent:di(co,i),startMark:di(zs,n),endMark:di(Ds,n),endPaint:di(Bs,n),clearMark:di(qs,n),markNTBT:di(Us,n),uninstall:Ys,uninstallException:tu,uninstallTraceCollector:Do,uninstallPerformance:Ps,setExcludeException:Zs,setExcludeApiError:ec,setExcludeApi:tc,setMetadata:pa.setMetadata.bind(pa),deviceId:Zi,userId:oa(),visitId:Wi,pubsub:pa.emitter,ktrTryCatch:ru,pv:te,setKtrackerState:te,generateHunterid:te,checkReportException:te};return d.__G_KTRACKER__=a}())}(this);
